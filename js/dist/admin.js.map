{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/hyperscriptVnode.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/render.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/request/request.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/querystring/build.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/pathname/build.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/route.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/index.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/mount-redraw.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/domFor.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/util/censor.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/vnode.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/util/hasOwn.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/trust.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/hyperscript.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/api/router.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/fragment.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/pathname/compileTemplate.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/render/hyperscript.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/api/mount-redraw.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/pathname/parse.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/querystring/parse.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/mithril@2.3.4/node_modules/mithril/request.js","webpack://@wusong8899/client1-buttons-customization/webpack/bootstrap","webpack://@wusong8899/client1-buttons-customization/webpack/runtime/compat get default export","webpack://@wusong8899/client1-buttons-customization/webpack/runtime/define property getters","webpack://@wusong8899/client1-buttons-customization/webpack/runtime/hasOwnProperty shorthand","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['admin/app']\"","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['common/components/Button']\"","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@wusong8899/client1-buttons-customization/./src/admin/components/ButtonsCustomizationAddModal.ts","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['common/Component']\"","webpack://@wusong8899/client1-buttons-customization/./src/admin/components/ButtonsCustomizationDeleteModal.ts","webpack://@wusong8899/client1-buttons-customization/./src/admin/components/ButtonsCustomizationListItem.ts","webpack://@wusong8899/client1-buttons-customization/./node_modules/.pnpm/sortablejs@1.15.6/node_modules/sortablejs/modular/sortable.esm.js","webpack://@wusong8899/client1-buttons-customization/./src/admin/components/SettingsPage.ts","webpack://@wusong8899/client1-buttons-customization/external root \"flarum.core.compat['common/Model']\"","webpack://@wusong8899/client1-buttons-customization/./src/forum/model/ButtonsCustomization.ts","webpack://@wusong8899/client1-buttons-customization/./src/admin/index.ts"],"sourcesContent":["\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n\tvar attrs = arguments[this], start = this + 1, children\n\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = this\n\t}\n\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\n\treturn Vnode(\"\", attrs.key, attrs, children)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar df = require(\"../render/domFor\")\nvar delayedRemoval = df.delayedRemoval\nvar domFor = df.domFor\n\nmodule.exports = function() {\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tvar currentRedraw\n\tvar currentRender\n\n\tfunction getDocument(dom) {\n\t\treturn dom.ownerDocument;\n\t}\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"'vnode.state' must not be modified.\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement(dom) {\n\t\ttry {\n\t\t\treturn getDocument(dom).activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = getDocument(parent).createTextNode(vnode.children)\n\t\tinsertDOM(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = getDocument(parent).createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvar fragment = getDocument(parent).createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = getDocument(parent).createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = vnode.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? getDocument(parent).createElementNS(ns, tag, {is: is}) : getDocument(parent).createElementNS(ns, tag) :\n\t\t\tis ? getDocument(parent).createElement(tag, {is: is}) : getDocument(parent).createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertDOM(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveDOM(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveDOM(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveDOM(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag && old.is === vnode.is) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\tremoveDOM(parent, old)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequence\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\t// This handles fragments with zombie children (removed from vdom, but persisted in DOM through onbeforeremove)\n\tfunction moveDOM(parent, vnode, nextSibling) {\n\t\tif (vnode.dom != null) {\n\t\t\tvar target\n\t\t\tif (vnode.domSize == null) {\n\t\t\t\t// don't allocate for the common case\n\t\t\t\ttarget = vnode.dom\n\t\t\t} else {\n\t\t\t\ttarget = getDocument(parent).createDocumentFragment()\n\t\t\t\tfor (var dom of domFor(vnode)) target.appendChild(dom)\n\t\t\t}\n\t\t\tinsertDOM(parent, target, nextSibling)\n\t\t}\n\t}\n\n\tfunction insertDOM(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted.\")\n\t\treturn true\n\t}\n\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(parent, vnode)\n\t\t}\n\t}\n\tfunction tryBlockRemove(parent, vnode, source, counter) {\n\t\tvar original = vnode.state\n\t\tvar result = callHook.call(source.onbeforeremove, vnode)\n\t\tif (result == null) return\n\n\t\tvar generation = currentRender\n\t\tfor (var dom of domFor(vnode)) delayedRemoval.set(dom, generation)\n\t\tcounter.v++\n\n\t\tPromise.resolve(result).finally(function () {\n\t\t\tcheckState(vnode, original)\n\t\t\ttryResumeRemove(parent, vnode, counter)\n\t\t})\n\t}\n\tfunction tryResumeRemove(parent, vnode, counter) {\n\t\tif (--counter.v === 0) {\n\t\t\tonremove(vnode)\n\t\t\tremoveDOM(parent, vnode)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode) {\n\t\tvar counter = {v: 1}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") tryBlockRemove(parent, vnode, vnode.state, counter)\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") tryBlockRemove(parent, vnode, vnode.attrs, counter)\n\t\ttryResumeRemove(parent, vnode, counter)\n\t}\n\tfunction removeDOM(parent, vnode) {\n\t\tif (vnode.dom == null) return\n\t\tif (vnode.domSize == null) {\n\t\t\tparent.removeChild(vnode.dom)\n\t\t} else {\n\t\t\tfor (var dom of domFor(vnode)) parent.removeChild(dom)\n\t\t}\n\t}\n\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tif (vnode.events != null) vnode.events._ = null\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns) {\n\t\tif (key === \"key\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\t//setting input[type=file][value] to same value causes an error to be generated if it's non-empty\n\t\t\t\t//minlength/maxlength validation isn't performed on script-set values(#2256)\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting input[type=file][value] to different value is an error if it's non-empty\n\t\t\t\t// Not ideal, but it at least works around the most common source of uncaught exceptions for now.\n\t\t\t\tif (vnode.tag === \"input\" && vnode.attrs.type === \"file\" && \"\" + value !== \"\") { console.error(\"`value` is read-only on file inputs!\"); return }\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\tif (vnode.tag === \"input\" && key === \"type\") vnode.dom.setAttribute(key, value)\n\t\t\telse vnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& key !== \"title\" // creates \"null\" as title\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement(vnode.dom)\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\t// Some attributes may NOT be case-sensitive (e.g. data-***),\n\t\t// so removal should be done first to prevent accidental removal for newly setting values.\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tif (old === attrs) {\n\t\t\t\tconsole.warn(\"Don't reuse attrs object, use new object for every redraw, this will throw in next major\")\n\t\t\t}\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (attrs != null) {\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns)\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && (vnode.dom === activeElement(vnode.dom) || vnode.tag === \"option\" && vnode.dom.parentNode === activeElement(vnode.dom))\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) {\n\t\t\t\t\tif (key.includes(\"-\")) element.style.setProperty(key, String(value))\n\t\t\t\t\telse element.style[key] = String(value)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Remove style properties that no longer exist\n\t\t\t// Style properties may have two cases(dash-case and camelCase),\n\t\t\t// so removal should be done first to prevent accidental removal for newly setting values.\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\tif (key.includes(\"-\")) element.style.removeProperty(key)\n\t\t\t\t\telse element.style[key] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\tif (key.includes(\"-\")) element.style.setProperty(key, value)\n\t\t\t\t\telse element.style[key] = value\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tvar self = this\n\t\tif (self._ != null) {\n\t\t\tif (ev.redraw !== false) (0, self._)()\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tPromise.resolve(result).then(function () {\n\t\t\t\t\tif (self._ != null && ev.redraw !== false) (0, self._)()\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tvnode.events._ = currentRedraw\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\tvar currentDOM\n\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\t\tif (currentDOM != null && dom.contains(currentDOM)) {\n\t\t\tthrow new TypeError(\"Node is currently being rendered to and thus is locked.\")\n\t\t}\n\t\tvar prevRedraw = currentRedraw\n\t\tvar prevDOM = currentDOM\n\t\tvar hooks = []\n\t\tvar active = activeElement(dom)\n\t\tvar namespace = dom.namespaceURI\n\n\t\tcurrentDOM = dom\n\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\tcurrentRender = {}\n\t\ttry {\n\t\t\t// First time rendering into a node clears it out\n\t\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t\tdom.vnodes = vnodes\n\t\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\t\tif (active != null && activeElement(dom) !== active && typeof active.focus === \"function\") active.focus()\n\t\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t\tcurrentDOM = prevDOM\n\t\t}\n\t}\n}\n","\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nmodule.exports = function($window, oncompletion) {\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\tfunction makeRequest(url, args) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\turl = buildPathname(url, args.params)\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData || body instanceof $window.URLSearchParams)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false, isTimeout = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, \"content-type\")) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, \"accept\")) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif (hasOwn.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") {\n\t\t\t\t\t\t\t\t// Handle no-content which will not parse.\n\t\t\t\t\t\t\t\ttry { response = JSON.parse(ev.target.responseText) }\n\t\t\t\t\t\t\t\tcatch (e) { response = null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\t\t\tif (Array.isArray(response)) {\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\t\t\t\t\t\t\t\tresponse[i] = new args.type(response[i])\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse response = new args.type(response)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar completeErrorResponse = function() {\n\t\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (xhr.status === 0) {\n\t\t\t\t\t\t\t\t// Use setTimeout to push this code block onto the event queue\n\t\t\t\t\t\t\t\t// This allows `xhr.ontimeout` to run in the case that there is a timeout\n\t\t\t\t\t\t\t\t// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject\n\t\t\t\t\t\t\t\t// as `xhr.onreadystatechange` will run before it\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tif (isTimeout) return\n\t\t\t\t\t\t\t\t\tcompleteErrorResponse()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else completeErrorResponse()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.ontimeout = function (ev) {\n\t\t\t\tisTimeout = true\n\t\t\t\tvar error = new Error(\"Request timed out\")\n\t\t\t\terror.code = ev.target.status\n\t\t\t\treject(error)\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData || body instanceof $window.URLSearchParams) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t})\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif (hasOwn.call(args.headers, key) && key.toLowerCase() === name) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = makeRequest(url, args)\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n}\n","\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names must be separated by either a '/', '-', or '.'.\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tObject.assign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n","\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./api/router\")(typeof window !== \"undefined\" ? window : null, mountRedraw)\n","\"use strict\"\n\nmodule.exports = require(\"./render/render\")(typeof window !== \"undefined\" ? window : null)\n","\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar request = require(\"./request\")\nvar mountRedraw = require(\"./mount-redraw\")\nvar domFor = require(\"./render/domFor\")\n\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.Fragment = \"[\"\nm.mount = mountRedraw.mount\nm.route = require(\"./route\")\nm.render = require(\"./render\")\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.vnode = require(\"./render/vnode\")\nm.censor = require(\"./util/censor\")\nm.domFor = domFor.domFor\n\nmodule.exports = m\n","\"use strict\"\n\nvar render = require(\"./render\")\n\nmodule.exports = require(\"./api/mount-redraw\")(render, typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : null, typeof console !== \"undefined\" ? console : null)\n","\"use strict\"\n\nvar delayedRemoval = new WeakMap\n\nfunction *domFor(vnode) {\n\t// To avoid unintended mangling of the internal bundler,\n\t// parameter destructuring is not used here.\n\tvar dom = vnode.dom\n\tvar domSize = vnode.domSize\n\tvar generation = delayedRemoval.get(dom)\n\tif (dom != null) do {\n\t\tvar nextSibling = dom.nextSibling\n\n\t\tif (delayedRemoval.get(dom) === generation) {\n\t\t\tyield dom\n\t\t\tdomSize--\n\t\t}\n\n\t\tdom = nextSibling\n\t}\n\twhile (domSize)\n}\n\nmodule.exports = {\n\tdelayedRemoval: delayedRemoval,\n\tdomFor: domFor,\n}\n","\"use strict\"\n\n// Note: this is mildly perf-sensitive.\n//\n// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail\n// out into dictionary mode and just generally cause a bunch of optimization\n// issues within engines.\n//\n// Ideally, I would've preferred to do this, if it weren't for the optimization\n// issues:\n//\n// ```js\n// const hasOwn = require(\"./hasOwn\")\n// const magic = [\n//     \"key\", \"oninit\", \"oncreate\", \"onbeforeupdate\", \"onupdate\",\n//     \"onbeforeremove\", \"onremove\",\n// ]\n// module.exports = (attrs, extras) => {\n//     const result = Object.assign(Object.create(null), attrs)\n//     for (const key of magic) delete result[key]\n//     if (extras != null) for (const key of extras) delete result[key]\n//     return result\n// }\n// ```\n\nvar hasOwn = require(\"./hasOwn\")\n// Words in RegExp literals are sometimes mangled incorrectly by the internal bundler, so use RegExp().\nvar magic = new RegExp(\"^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$\")\n\nmodule.exports = function(attrs, extras) {\n\tvar result = {}\n\n\tif (extras != null) {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key) && extras.indexOf(key) < 0) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key)) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result\n}\n","\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, is: undefined, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\tisKeyed && (input[i] == null || typeof input[i] === \"boolean\")\n\t\t\t\t\t\t? \"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.\"\n\t\t\t\t\t\t: \"In fragments, vnodes must either all have keys or none have keys.\"\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n","// This exists so I'm only saving it once.\n\"use strict\"\n\nmodule.exports = {}.hasOwnProperty\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n","\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar m = require(\"../render/hyperscript\")\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar censor = require(\"../util/censor\")\n\nfunction decodeURIComponentSave(component) {\n\ttry {\n\t\treturn decodeURIComponent(component)\n\t} catch(e) {\n\t\treturn component\n\t}\n}\n\nmodule.exports = function($window, mountRedraw) {\n\tvar callAsync = $window == null\n\t\t// In case Mithril.js' loaded globally without the DOM, let's not break\n\t\t? null\n\t\t: typeof $window.setImmediate === \"function\" ? $window.setImmediate : $window.setTimeout\n\tvar p = Promise.resolve()\n\n\tvar scheduled = false\n\n\tvar ready = false\n\tvar hasBeenResolved = false\n\n\tvar dom, compiled, fallbackRoute\n\n\tvar currentResolver, component, attrs, currentPath, lastUpdate\n\n\tvar RouterRoot = {\n\t\tonremove: function() {\n\t\t\tready = hasBeenResolved = false\n\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t},\n\t\tview: function() {\n\t\t\t// The route has already been resolved.\n\t\t\t// Therefore, the following early return is not needed.\n\t\t\t// if (!hasBeenResolved) return\n\n\t\t\tvar vnode = Vnode(component, attrs.key, attrs)\n\t\t\tif (currentResolver) return currentResolver.render(vnode)\n\t\t\t// Wrap in a fragment to preserve existing key semantics\n\t\t\treturn [vnode]\n\t\t},\n\t}\n\n\tvar SKIP = route.SKIP = {}\n\n\tfunction resolveRoute() {\n\t\tscheduled = false\n\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t// but that's not our problem.\n\t\tvar prefix = $window.location.hash\n\t\tif (route.prefix[0] !== \"#\") {\n\t\t\tprefix = $window.location.search + prefix\n\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t}\n\t\t}\n\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t// since the representation is consistently a relatively poorly\n\t\t// optimized cons string.\n\t\tvar path = prefix.concat()\n\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponentSave)\n\t\t\t.slice(route.prefix.length)\n\t\tvar data = parsePathname(path)\n\n\t\tObject.assign(data.params, $window.history.state)\n\n\t\tfunction reject(e) {\n\t\t\tconsole.error(e)\n\t\t\troute.set(fallbackRoute, null, {replace: true})\n\t\t}\n\n\t\tloop(0)\n\t\tfunction loop(i) {\n\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\tvar localComp = payload\n\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\tattrs = data.params, currentPath = path, lastUpdate = null\n\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\tif (hasBeenResolved) mountRedraw.redraw()\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\thasBeenResolved = true\n\t\t\t\t\t\t\tmountRedraw.mount(dom, RouterRoot)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\treturn payload.onmatch(data.params, path, matchedRoute)\n\t\t\t\t\t\t}).then(update, path === fallbackRoute ? null : reject)\n\t\t\t\t\t}\n\t\t\t\t\telse update(/* \"div\" */)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (path === fallbackRoute) {\n\t\t\t\tthrow new Error(\"Could not resolve default route \" + fallbackRoute + \".\")\n\t\t\t}\n\t\t\troute.set(fallbackRoute, null, {replace: true})\n\t\t}\n\t}\n\n\tfunction fireAsync() {\n\t\tif (!scheduled) {\n\t\t\tscheduled = true\n\t\t\t// TODO: just do `mountRedraw.redraw()` here and elide the timer\n\t\t\t// dependency. Note that this will muck with tests a *lot*, so it's\n\t\t\t// not as easy of a change as it sounds.\n\t\t\tcallAsync(resolveRoute)\n\t\t}\n\t}\n\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (!root) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\n\t\tcompiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a '/'.\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either '/', '.', or '-'.\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tfallbackRoute = defaultRoute\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes.\")\n\t\t\t}\n\t\t}\n\t\tdom = root\n\n\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\n\t\tready = true\n\n\t\t// The RouterRoot component is mounted when the route is first resolved.\n\t\tresolveRoute()\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\n\t\tpath = buildPathname(path, data)\n\t\tif (ready) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path\n\t\t}\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode) {\n\t\t\t// Omit the used parameters from the rendered element - they are\n\t\t\t// internal. Also, censor the various lifecycle methods.\n\t\t\t//\n\t\t\t// We don't strip the other parameters because for convenience we\n\t\t\t// let them be specified in the selector as well.\n\t\t\tvar child = m(\n\t\t\t\tvnode.attrs.selector || \"a\",\n\t\t\t\tcensor(vnode.attrs, [\"options\", \"params\", \"selector\", \"onclick\"]),\n\t\t\t\tvnode.children\n\t\t\t)\n\t\t\tvar options, onclick, href\n\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n\t\t\t\tchild.attrs.href = null\n\t\t\t\tchild.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want add `onclick` on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t} else {\n\t\t\t\toptions = vnode.attrs.options\n\t\t\t\tonclick = vnode.attrs.onclick\n\t\t\t\t// Easier to build it now to keep it isomorphic.\n\t\t\t\thref = buildPathname(child.attrs.href, vnode.attrs.params)\n\t\t\t\tchild.attrs.href = route.prefix + href\n\t\t\t\tchild.attrs.onclick = function(e) {\n\t\t\t\t\tvar result\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child\n\t\t},\n\t}\n\troute.param = function(key) {\n\t\treturn attrs && key != null ? attrs[key] : attrs\n\t}\n\n\treturn route\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function() {\n\tvar vnode = hyperscriptVnode.apply(0, arguments)\n\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n","\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"\\\\/?$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = Object.create(null)\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\tif (isEmpty(attrs)) attrs = null\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\n\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tvnode.tag = state.tag\n\n\tif (state.attrs != null) {\n\t\tattrs = Object.assign({}, state.attrs, attrs)\n\n\t\tif (className != null || state.attrs.className != null) attrs.className =\n\t\t\tclassName != null\n\t\t\t\t? state.attrs.className != null\n\t\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t\t: className\n\t\t\t\t: state.attrs.className != null\n\t\t\t\t\t? state.attrs.className\n\t\t\t\t\t: null\n\t} else {\n\t\tif (className != null) attrs.className = className\n\t}\n\n\tif (hasClass) attrs.class = null\n\n\t// workaround for #2622 (reorder keys in attrs to set \"type\" first)\n\t// The DOM does things to inputs based on the \"type\", so it needs set first.\n\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\tif (state.tag === \"input\" && hasOwn.call(attrs, \"type\")) {\n\t\tattrs = Object.assign({type: attrs.type}, attrs)\n\t}\n\n\t// This reduces the complexity of the evaluation of \"is\" within the render function.\n\tvnode.is = attrs.is\n\n\tvnode.attrs = attrs\n\n\treturn vnode\n}\n\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(render, schedule, console) {\n\tvar subscriptions = []\n\tvar pending = false\n\tvar offset = -1\n\n\tfunction sync() {\n\t\tfor (offset = 0; offset < subscriptions.length; offset += 2) {\n\t\t\ttry { render(subscriptions[offset], Vnode(subscriptions[offset + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\toffset = -1\n\t}\n\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\n\tredraw.sync = sync\n\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount expects a component, not a vnode.\")\n\t\t}\n\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\tif (index <= offset) offset -= 2\n\t\t\trender(root, [])\n\t\t}\n\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender(root, Vnode(component), redraw)\n\t\t}\n\t}\n\n\treturn {mount: mount, redraw: redraw}\n}\n","\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n","\"use strict\"\n\nfunction decodeURIComponentSave(str) {\n\ttry {\n\t\treturn decodeURIComponent(str)\n\t} catch(err) {\n\t\treturn str\n\t}\n}\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponentSave(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponentSave(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j === levels.length - 1) cursor[level] = value\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data\n}\n","\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./request/request\")(typeof window !== \"undefined\" ? window : null, mountRedraw.redraw)\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport ButtonsCustomization from '../../forum/model/ButtonsCustomization';\r\nimport app from 'flarum/admin/app';\r\nimport m from 'mithril';\r\nimport type Mithril from 'mithril';\r\n\r\ninterface ButtonsCustomizationAddModalAttrs extends IInternalModalAttrs {\r\n  ButtonsCustomizationItemData?: ButtonsCustomization;\r\n}\r\n\r\nexport default class ButtonsCustomizationAddModal extends Modal<ButtonsCustomizationAddModalAttrs> {\r\n  static isDismissible = false;\r\n\r\n  ButtonsCustomizationItemData?: ButtonsCustomization;\r\n  settingType!: 'add' | 'edit';\r\n  itemName!: Stream<string>;\r\n  itemUrl!: Stream<string>;\r\n  itemIcon!: Stream<string>;\r\n  itemColor!: Stream<string>;\r\n  loading!: boolean;\r\n\r\n  oninit(vnode: Mithril.Vnode<ButtonsCustomizationAddModalAttrs>) {\r\n    super.oninit(vnode);\r\n    this.ButtonsCustomizationItemData = this.attrs.ButtonsCustomizationItemData;\r\n    this.settingType = 'add';\r\n    this.loading = false;\r\n\r\n    if (this.ButtonsCustomizationItemData) {\r\n      this.settingType = 'edit';\r\n      this.itemName = Stream(this.ButtonsCustomizationItemData.name());\r\n      this.itemUrl = Stream(this.ButtonsCustomizationItemData.url());\r\n      this.itemIcon = Stream(this.ButtonsCustomizationItemData.icon());\r\n      this.itemColor = Stream(this.ButtonsCustomizationItemData.color());\r\n    } else {\r\n      this.itemName = Stream('');\r\n      this.itemUrl = Stream('');\r\n      this.itemIcon = Stream('');\r\n      this.itemColor = Stream('');\r\n    }\r\n  }\r\n\r\n  className(): string {\r\n    return 'Modal--medium';\r\n  }\r\n\r\n  title(): Mithril.Children {\r\n    return this.settingType === 'add'\r\n      ? app.translator.trans('client1-buttons-customization.admin.settings.item-add')\r\n      : app.translator.trans('client1-buttons-customization.admin.settings.item-edit');\r\n  }\r\n\r\n  content(): Mithril.Children {\r\n    return m('div', { className: 'Modal-body' }, [\r\n      m('div', { className: 'Form' }, [\r\n        m('div', { className: 'Form-group', style: 'text-align: center;' }, [\r\n          m('div', [\r\n            m('div', { className: 'GuaGuaLeSettingsLabel' }, app.translator.trans('client1-buttons-customization.admin.settings.item-name')),\r\n            m('input', {\r\n              maxlength: 255,\r\n              required: true,\r\n              className: 'FormControl',\r\n              value: this.itemName(),\r\n              oninput: (e: InputEvent) => this.itemName((e.target as HTMLInputElement).value),\r\n            }),\r\n            m('div', { className: 'GuaGuaLeSettingsLabel' }, app.translator.trans('client1-buttons-customization.admin.settings.item-url')),\r\n            m('input', {\r\n              maxlength: 500,\r\n              required: true,\r\n              className: 'FormControl',\r\n              value: this.itemUrl(),\r\n              oninput: (e: InputEvent) => this.itemUrl((e.target as HTMLInputElement).value),\r\n            }),\r\n            m('div', { className: 'GuaGuaLeSettingsLabel' }, app.translator.trans('client1-buttons-customization.admin.settings.item-icon')),\r\n            m('input', {\r\n              maxlength: 50,\r\n              required: true,\r\n              className: 'FormControl',\r\n              value: this.itemIcon(),\r\n              oninput: (e: InputEvent) => this.itemIcon((e.target as HTMLInputElement).value),\r\n            }),\r\n          ]),\r\n        ]),\r\n\r\n        m('div', { className: 'Form-group', style: 'text-align: center;' }, [\r\n          m(Button, { className: 'Button Button--primary', type: 'submit', loading: this.loading },\r\n            app.translator.trans('client1-buttons-customization.admin.confirm')\r\n          ),\r\n          ' ',\r\n          m(Button, { className: 'Button guagualeButton--gray', loading: this.loading, onclick: () => this.hide() },\r\n            app.translator.trans('client1-buttons-customization.admin.cancel')\r\n          ),\r\n        ]),\r\n      ]),\r\n    ]);\r\n  }\r\n\r\n  onsubmit(e: Event): void {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    if (this.settingType === 'edit' && this.ButtonsCustomizationItemData) {\r\n      this.ButtonsCustomizationItemData.save({\r\n        name: this.itemName(),\r\n        url: this.itemUrl(),\r\n        icon: this.itemIcon(),\r\n        color: this.itemColor(),\r\n      })\r\n        .then(() => this.hide())\r\n        .catch((response) => {\r\n          this.loading = false;\r\n          this.handleErrors(response);\r\n        });\r\n    } else {\r\n      app.store\r\n        .createRecord('buttonsCustomizationList')\r\n        .save({\r\n          name: this.itemName(),\r\n          url: this.itemUrl(),\r\n          icon: this.itemIcon(),\r\n          color: this.itemColor(),\r\n        })\r\n        .then(() => {\r\n          location.reload();\r\n        })\r\n        .catch((error) => {\r\n          this.loading = false;\r\n          this.handleErrors(error);\r\n        });\r\n    }\r\n  }\r\n\r\n  handleErrors(error: any): void {\r\n    // Fallback error handling: show a generic alert using our translations\r\n    console.error('ButtonsCustomizationAddModal error', error);\r\n    app.alerts.show({ type: 'error' }, app.translator.trans('client1-buttons-customization.admin.save-error'));\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport ButtonsCustomization from '../../forum/model/ButtonsCustomization';\r\nimport app from 'flarum/admin/app';\r\nimport m from 'mithril';\r\nimport type Mithril from 'mithril';\r\n\r\ninterface ButtonsCustomizationDeleteModalAttrs extends IInternalModalAttrs {\r\n  ButtonsCustomizationItemData: ButtonsCustomization;\r\n}\r\n\r\nexport default class ButtonsCustomizationDeleteModal extends Modal<ButtonsCustomizationDeleteModalAttrs> {\r\n  static isDismissible = false;\r\n\r\n  ButtonsCustomizationItemData!: ButtonsCustomization;\r\n  loading!: boolean;\r\n\r\n  oninit(vnode: Mithril.Vnode<ButtonsCustomizationDeleteModalAttrs>) {\r\n    super.oninit(vnode);\r\n    this.ButtonsCustomizationItemData = this.attrs.ButtonsCustomizationItemData;\r\n    this.loading = false;\r\n  }\r\n\r\n  className(): string {\r\n    return 'Modal--small';\r\n  }\r\n\r\n  title(): Mithril.Children {\r\n    return app.translator.trans('client1-buttons-customization.admin.settings.item-delete-confirmation');\r\n  }\r\n\r\n  content(): Mithril.Children {\r\n    return m('div', { className: 'Modal-body' }, [\r\n      m('div', { className: 'Form-group', style: 'text-align: center;' }, [\r\n        m(Button, { className: 'Button Button--primary', type: 'submit', loading: this.loading },\r\n          app.translator.trans('client1-buttons-customization.admin.confirm')\r\n        ),\r\n        ' ',\r\n        m(Button, { className: 'Button guagualeButton--gray', loading: this.loading, onclick: () => this.hide() },\r\n          app.translator.trans('client1-buttons-customization.admin.cancel')\r\n        ),\r\n      ]),\r\n    ]);\r\n  }\r\n\r\n  onsubmit(e: Event): void {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.ButtonsCustomizationItemData.delete()\r\n      .then(() => {\r\n        location.reload();\r\n      });\r\n  }\r\n}\r\n","import Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport ButtonsCustomizationAddModal from './ButtonsCustomizationAddModal';\r\nimport ButtonsCustomizationDeleteModal from './ButtonsCustomizationDeleteModal';\r\nimport ButtonsCustomization from '../../forum/model/ButtonsCustomization';\r\nimport app from 'flarum/admin/app';\r\nimport m from 'mithril';\r\n\r\ninterface ButtonsCustomizationListItemAttrs {\r\n  ButtonsCustomizationItemData: ButtonsCustomization;\r\n}\r\n\r\nexport default class ButtonsCustomizationListItem extends Component<ButtonsCustomizationListItemAttrs> {\r\n  view(): m.Children {\r\n    const { ButtonsCustomizationItemData } = this.attrs;\r\n    const buttonsCustomizationID = ButtonsCustomizationItemData.id();\r\n    const buttonsCustomizationName = ButtonsCustomizationItemData.name();\r\n    const buttonsCustomizationUrl = ButtonsCustomizationItemData.url();\r\n    const buttonsCustomizationIcon = ButtonsCustomizationItemData.icon();\r\n\r\n    return m('div', { style: 'border: 1px dotted var(--control-color);padding: 10px;border-radius: 4px;' }, [\r\n      m('div', [\r\n        m('div', { style: 'padding-top: 5px;' }, [\r\n          m(Button, { className: 'Button Button--primary', onclick: () => this.editItem(ButtonsCustomizationItemData) },\r\n            app.translator.trans('client1-buttons-customization.admin.settings.item-edit')\r\n          ),\r\n          ' ',\r\n          m(Button, { className: 'Button Button--danger', style: 'font-weight:bold;width:66px;', onclick: () => this.deleteItem(ButtonsCustomizationItemData) },\r\n            app.translator.trans('client1-buttons-customization.admin.settings.item-delete')\r\n          ),\r\n          ' ',\r\n          m('b', app.translator.trans('client1-buttons-customization.admin.settings.item-id') + ': '),\r\n          buttonsCustomizationID,\r\n          ' | ',\r\n          m('i', { className: buttonsCustomizationIcon }),\r\n          ' ',\r\n          m('b', app.translator.trans('client1-buttons-customization.admin.settings.item-name') + ': '),\r\n          buttonsCustomizationName,\r\n          ' | ',\r\n          m('b', app.translator.trans('client1-buttons-customization.admin.settings.item-url') + ': '),\r\n          buttonsCustomizationUrl,\r\n          ' ',\r\n        ]),\r\n      ]),\r\n    ]);\r\n  }\r\n\r\n  editItem(ButtonsCustomizationItemData: ButtonsCustomization): void {\r\n    app.modal.show(ButtonsCustomizationAddModal, { ButtonsCustomizationItemData });\r\n  }\r\n\r\n  deleteItem(ButtonsCustomizationItemData: ButtonsCustomization): void {\r\n    app.modal.show(ButtonsCustomizationDeleteModal, { ButtonsCustomizationItemData });\r\n  }\r\n}\r\n","/**!\n * Sortable 1.15.6\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.6\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    // Disabled on Safari: #1571; Enabled on Safari IOS: #2244\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && (!Safari || IOS),\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      if (options.supportPointer) {\n        on(ownerDocument, 'pointerup', _this._onDrop);\n        // Native D&D triggers pointercancel\n        !this.nativeDraggable && on(ownerDocument, 'pointercancel', _this._onDrop);\n      } else {\n        on(ownerDocument, 'mouseup', _this._onDrop);\n        on(ownerDocument, 'touchend', _this._onDrop);\n        on(ownerDocument, 'touchcancel', _this._onDrop);\n      }\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        if (options.supportPointer) {\n          on(ownerDocument, 'pointerup', _this._disableDelayedDrag);\n          on(ownerDocument, 'pointercancel', _this._disableDelayedDrag);\n        } else {\n          on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        }\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'pointerup', this._disableDelayedDrag);\n    off(ownerDocument, 'pointercancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = getParentOrHost(parent));\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    window.getSelection().removeAllRanges();\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'pointercancel', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild,\n  expando: expando\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              (function () {\n                // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n                // (but previous selection existed)\n                var n, i;\n                if (currentIndex > lastIndex) {\n                  i = lastIndex;\n                  n = currentIndex;\n                } else {\n                  i = currentIndex;\n                  n = lastIndex + 1;\n                }\n                var filter = options.filter;\n                for (; i < n; i++) {\n                  if (~multiDragElements.indexOf(children[i])) continue;\n                  // Check if element is draggable\n                  if (!closest(children[i], options.draggable, parentEl, false)) continue;\n                  // Check if element is filtered\n                  var filtered = filter && (typeof filter === 'function' ? filter.call(sortable, evt, children[i], sortable) : filter.split(',').some(function (criteria) {\n                    return closest(children[i], criteria.trim(), parentEl, false);\n                  }));\n                  if (filtered) continue;\n                  toggleClass(children[i], options.selectedClass, true);\n                  multiDragElements.push(children[i]);\n                  dispatchEvent({\n                    sortable: sortable,\n                    rootEl: rootEl,\n                    name: 'select',\n                    targetEl: children[i],\n                    originalEvent: evt\n                  });\n                }\n              })();\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport Button from 'flarum/common/components/Button';\r\nimport ButtonsCustomizationAddModal from './ButtonsCustomizationAddModal';\r\nimport ButtonsCustomizationListItem from './ButtonsCustomizationListItem';\r\nimport ButtonsCustomization from '../../forum/model/ButtonsCustomization';\r\nimport app from 'flarum/admin/app';\r\n\r\nimport Sortable, { SortableEvent } from 'sortablejs';\r\nimport m from 'mithril';\r\nimport type Mithril from 'mithril';\r\n\r\nexport default class SettingsPage extends ExtensionPage {\r\n  loading!: boolean;\r\n  buttonsCustomizationList!: ButtonsCustomization[];\r\n\r\n  oninit(vnode: Mithril.Vnode) {\r\n    super.oninit(vnode);\r\n    this.loading = false;\r\n    this.buttonsCustomizationList = [];\r\n    this.loadResults();\r\n  }\r\n\r\n  initSort(): void {\r\n    const el = document.getElementById('buttonsCustomizationSortableItems');\r\n    if (el) {\r\n      Sortable.create(el, {\r\n        animation: 150,\r\n        swapThreshold: 0.65,\r\n        onEnd: (e: SortableEvent) => this.updateSort(e),\r\n      });\r\n    }\r\n  }\r\n\r\n  content(vnode: Mithril.VnodeDOM): JSX.Element {\r\n    const out = m('div', { className: 'ExtensionPage-settings FlarumBadgesPage' }, [\r\n      m('div', { className: 'container' }, [\r\n        m('div', { style: 'padding-bottom:10px' }, [\r\n          m(Button, { className: 'Button', onclick: () => app.modal.show(ButtonsCustomizationAddModal) }, app.translator.trans('client1-buttons-customization.admin.link-add')),\r\n        ]),\r\n        m(\r\n          'ul',\r\n          { id: 'buttonsCustomizationSortableItems', style: 'padding:0px;list-style-type: none;', oncreate: this.initSort.bind(this) },\r\n          this.buttonsCustomizationList.map((ButtonsCustomizationItemData: ButtonsCustomization) =>\r\n            m(\r\n              'li',\r\n              { 'data-item-id': ButtonsCustomizationItemData.id(), style: 'margin-top:5px;background: var(--body-bg);' },\r\n              ButtonsCustomizationListItem.component({ ButtonsCustomizationItemData })\r\n            )\r\n          )\r\n        ),\r\n      ]),\r\n    ]);\r\n\r\n    return out as unknown as JSX.Element;\r\n  }\r\n\r\n  updateSort(e: SortableEvent): void {\r\n    const newIndex = e.newIndex;\r\n    const oldIndex = e.oldIndex;\r\n\r\n    if (newIndex !== oldIndex) {\r\n      const children = e.from?.children;\r\n      const buttonsCustomizationOrder: Record<string, number> = {};\r\n\r\n      if (children) {\r\n        for (let i = 0; i < children.length; i++) {\r\n          const child = children[i];\r\n          const itemID = (child as HTMLElement).getAttribute(\"data-item-id\");\r\n\r\n          if (itemID) {\r\n            buttonsCustomizationOrder[itemID] = i;\r\n          }\r\n        }\r\n\r\n        app.request({\r\n          url: `${app.forum.attribute('apiUrl')}/buttonsCustomizationList/order`,\r\n          method: 'POST',\r\n          body: { buttonsCustomizationOrder },\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  parseResults(results: any): any {\r\n    this.buttonsCustomizationList.push(...(results as ButtonsCustomization[]));\r\n    m.redraw();\r\n    return results;\r\n  }\r\n\r\n  loadResults(): Promise<any> {\r\n    return app.store\r\n      .find(\"buttonsCustomizationList\")\r\n      .catch(() => [])\r\n      .then(this.parseResults.bind(this));\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from \"flarum/common/Model\";\r\n\r\nexport default class ButtonsCustomization extends Model {\r\n  id!: () => string | undefined;\r\n  name!: () => string;\r\n  icon!: () => string;\r\n  color!: () => string;\r\n  url!: () => string;\r\n  sort!: () => number;\r\n}\r\n\r\nObject.assign(ButtonsCustomization.prototype, {\r\n  id: Model.attribute<string>(\"id\"),\r\n  name: Model.attribute<string>(\"name\"),\r\n  icon: Model.attribute<string>(\"icon\"),\r\n  color: Model.attribute<string>(\"color\"),\r\n  url: Model.attribute<string>(\"url\"),\r\n  sort: Model.attribute<number>(\"sort\"),\r\n});\r\n","import app from 'flarum/admin/app';\r\nimport SettingsPage from './components/SettingsPage';\r\nimport ButtonsCustomization from \"../forum/model/ButtonsCustomization\";\r\n\r\napp.initializers.add('wusong8899-buttons-customization', () => {\r\n  app.store.models.buttonsCustomizationList = ButtonsCustomization;\r\n  app.extensionData.for('wusong8899-client1-buttons-customization').registerPage(SettingsPage);\r\n});\r\n"],"names":["Vnode","module","exports","children","attrs","arguments","this","start","tag","Array","isArray","length","push","key","df","delayedRemoval","domFor","currentRedraw","currentRender","nameSpace","svg","math","getDocument","dom","ownerDocument","getNameSpace","vnode","xmlns","checkState","original","state","Error","callHook","apply","activeElement","e","createNodes","parent","vnodes","end","hooks","nextSibling","ns","i","createNode","initLifecycle","createTextNode","insertDOM","createText","createHTML","fragment","createDocumentFragment","firstChild","domSize","childNodes","createFragment","is","element","createElementNS","createElement","setAttr","setAttrs","maybeSetContentEditable","value","selectedIndex","normalized","undefined","setLateSelectAttrs","sentinel","view","Object","create","$$reentrantLock$$","prototype","instance","normalize","call","initComponent","createComponent","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","match","temp","innerHTML","child","appendChild","updateNodes","old","removeNodes","isOldKeyed","isKeyed","oldStart","o","v","oe","ve","topSibling","oldEnd","updateNode","getNextSibling","moveDOM","map","lisIndices","originalNextSibling","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","a","result","u","il","lisTemp","j","c","makeLisIndices","commonLength","removeNode","oldTag","events","force","onbeforeupdate","text","shouldNotUpdate","updateLifecycle","toString","nodeValue","updateText","removeDOM","updateHTML","updateFragment","val","console","warn","removeAttr","updateAttrs","updateElement","updateComponent","currentDOM","target","insertBefore","contenteditable","contentEditable","content","tryBlockRemove","source","counter","onbeforeremove","generation","set","Promise","resolve","finally","tryResumeRemove","onremove","removeChild","_","isLifecycleMethod","attr","parentNode","isFormAttribute","updateEvent","slice","setAttributeNS","updateStyle","hasPropertyKey","type","error","setAttribute","removeAttribute","nsLastIndex","indexOf","style","includes","setProperty","String","removeProperty","EventDict","removeEventListener","addEventListener","oninit","oncreate","bind","onupdate","handleEvent","ev","handler","currentTarget","self","redraw","then","preventDefault","stopPropagation","TypeError","contains","prevRedraw","prevDOM","active","namespace","namespaceURI","textContent","normalizeChildren","focus","buildPathname","hasOwn","$window","oncompletion","PromiseProxy","executor","hasHeader","args","name","headers","toLowerCase","__proto__","request","url","promise","reject","params","replacedAbort","method","toUpperCase","body","assumeJSON","serialize","JSON","FormData","URLSearchParams","responseType","extract","xhr","XMLHttpRequest","aborted","isTimeout","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","onreadystatechange","readyState","message","success","status","test","response","parse","responseText","completeErrorResponse","code","setTimeout","ontimeout","config","send","stringify","makeRequest","background","count","complete","wrap","constructor","next","object","destructure","join","encodeURIComponent","buildQueryString","template","SyntaxError","queryIndex","hashIndex","queryEnd","pathEnd","path","query","assign","resolved","replace","m","variadic","newQueryIndex","newHashIndex","newQueryEnd","newPathEnd","querystring","mountRedraw","window","hyperscript","trust","Fragment","mount","route","render","parseQueryString","parsePathname","censor","requestAnimationFrame","WeakMap","get","magic","RegExp","extras","node","input","hasOwnProperty","html","compileTemplate","decodeURIComponentSave","component","decodeURIComponent","compiled","fallbackRoute","currentResolver","currentPath","lastUpdate","callAsync","setImmediate","p","scheduled","ready","hasBeenResolved","RouterRoot","fireAsync","SKIP","resolveRoute","prefix","location","hash","search","pathname","concat","data","history","loop","check","payload","matchedRoute","localComp","update","comp","onmatch","root","defaultRoute","routes","keys","defaultData","some","ReferenceError","options","title","replaceState","pushState","href","Link","onclick","selector","disabled","Boolean","defaultPrevented","button","which","ctrlKey","metaKey","shiftKey","altKey","param","hyperscriptVnode","templateData","templateKeys","regexp","extra","k","r","values","exec","selectorParser","selectorCache","hasClass","className","class","execSelector","classes","id","attrValue","isEmpty","compileSelector","schedule","subscriptions","pending","offset","sync","index","splice","str","err","string","charAt","entries","split","counters","entry","levels","cursor","pop","level","nextLevel","isNumber","isNaN","parseInt","desc","getOwnPropertyDescriptor","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","defineProperty","enumerable","obj","prop","flarum","core","compat","_setPrototypeOf","t","setPrototypeOf","_inheritsLoose","ButtonsCustomizationAddModal","_Modal","_this","_len","_key","ButtonsCustomizationItemData","settingType","itemName","itemUrl","itemIcon","itemColor","loading","_proto","Stream","icon","color","app","trans","_this2","maxlength","required","oninput","Button","hide","onsubmit","_this3","save","handleErrors","createRecord","reload","show","Modal","isDismissible","ButtonsCustomizationDeleteModal","ButtonsCustomizationListItem","_Component","buttonsCustomizationID","buttonsCustomizationName","buttonsCustomizationUrl","buttonsCustomizationIcon","editItem","deleteItem","Component","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","_objectSpread2","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","Symbol","iterator","configurable","writable","_extends","userAgent","pattern","navigator","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","capture","passive","on","el","event","fn","off","matches","substring","msMatchesSelector","webkitMatchesSelector","getParentOrHost","host","document","nodeType","closest","ctx","includeCTX","_throttleTimeout","R_SPACE","toggleClass","classList","css","defaultView","getComputedStyle","currentStyle","matrix","selfOnly","appliedTransforms","transform","matrixFn","DOMMatrix","WebKitCSSMatrix","CSSMatrix","MSCSSMatrix","find","tagName","list","getElementsByTagName","getWindowScrollingElement","scrollingElement","documentElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","container","getBoundingClientRect","elRect","top","left","bottom","right","height","width","innerHeight","innerWidth","containerRect","elMatrix","scaleX","scaleY","isScrolledPast","elSide","parentSide","getParentAutoScrollElement","elSideVal","parentSideVal","getChild","childNum","includeDragEl","currentChild","display","Sortable","ghost","dragged","draggable","lastChild","last","lastElementChild","previousElementSibling","nodeName","clone","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","scrollLeft","scrollTop","includeSelf","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","isRectEqual","rect1","rect2","Math","round","throttle","callback","ms","scrollBy","x","y","Polymer","$","jQuery","Zepto","cloneNode","getChildContainingRectFromElement","ghostEl","rect","from","_rect$left","_rect$top","_rect$right","_rect$bottom","animated","childRect","min","Infinity","max","expando","Date","getTime","plugins","defaults","initializeByDefault","PluginManager","plugin","option","pluginName","pluginEvent","eventName","sortable","evt","eventCanceled","cancel","eventNameGlobal","initializePlugins","initialized","modified","modifyOption","getEventProperties","eventProperties","modifiedValue","optionListeners","_excluded","_ref","originalEvent","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_objectWithoutProperties","dragEl","parentEl","rootEl","nextEl","lastDownEl","cloneEl","cloneHidden","dragStarted","moved","putSortable","activeSortable","oldDraggableIndex","newIndex","newDraggableIndex","hideGhostForTarget","_hideGhostForTarget","unhideGhostForTarget","_unhideGhostForTarget","cloneNowHidden","cloneNowShown","dispatchSortableEvent","_dispatchEvent","info","targetEl","toEl","fromEl","extraEventProperties","onName","substr","CustomEvent","createEvent","initEvent","bubbles","cancelable","to","item","pullMode","lastPutMode","allEventProperties","dispatchEvent","activeGroup","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","targetMoveDistance","ghostRelativeParent","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","cssText","pointerEvents","_detectDirection","elCSS","elWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","secondChildWidth","flexDirection","gridTemplateColumns","touchingSideChild2","clear","_prepareGroup","toFn","pull","sameGroup","group","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","stopImmediatePropagation","nearestEmptyInsertDetectEvent","touches","nearest","clientX","clientY","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","ret","_onDragOver","_checkOutsideTargetEl","_isOutsideThisEl","animationCallbackId","animationStates","sort","store","handle","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","animation","easing","setData","dataTransfer","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","Number","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_onTapStart","captureAnimationState","fromRect","thisAnimationDuration","childMatrix","f","addAnimationState","removeAnimationState","arr","indexOfObject","animateAll","clearTimeout","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","sqrt","pow","calculateRealTime","animate","animationResetTimer","currentRect","duration","translateX","translateY","animatingX","animatingY","forRepaintDummy","offsetWidth","repaint","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_generateId","src","sum","charCodeAt","_nextTick","_cancelNextTick","_getDirection","touch","pointerType","originalTarget","shadowRoot","composedPath","inputs","idx","checked","_saveInputCheckedState","isContentEditable","criteria","trim","_prepareDragStart","dragStartFn","_lastX","_lastY","_onDrop","_disableDelayedDragEvents","_triggerDragStart","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","abs","floor","_onTouchMove","_onDragStart","selection","empty","getSelection","removeAllRanges","_dragStarted","fallback","_appendGhost","_nulling","_emulateDragOver","elementFromPoint","ghostMatrix","relativeScrollOffset","dx","dy","b","cssMatrix","_hideClone","cloneId","_loopId","setInterval","effectAllowed","_dragStartId","revert","vertical","isOwner","canSort","fromSortable","completedFired","dragOverEvent","_ignoreWhileAnimating","completed","elLastChild","lastElRect","childContainingRect","_ghostIsLast","changed","firstElRect","_ghostIsFirst","targetBeforeFirstSwap","sibling","differentLevel","differentRowCol","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_dragElInRowColumn","side1","scrolledPastTop","scrollBefore","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","_getSwapDirection","dragIndex","nextElementSibling","after","moveVector","axis","insertion","_showClone","_offMoveEvents","_offUpEvents","clearInterval","dropEffect","_globalDragOver","toArray","order","getAttribute","useAnimation","items","destroy","querySelectorAll","utils","extend","dst","nextTick","cancelNextTick","detectDirection","version","scrollEl","scrollRootEl","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","autoScrolls","scrolling","clearAutoScrolls","autoScroll","pid","clearPointerElemChangedInterval","isFallback","scroll","scrollCustomFn","sens","scrollSensitivity","speed","scrollSpeed","scrollThisInstance","scrollFn","layersOut","currentParent","canScrollX","canScrollY","scrollPosX","scrollPosY","vx","vy","layer","scrollOffsetY","scrollOffsetX","bubbleScroll","drop","toSortable","changedTouches","onSpill","Revert","Remove","startIndex","dragStart","_ref2","_ref3","_ref4","parentSortable","AutoScroll","forceAutoScrollFallback","_handleAutoScroll","_handleFallbackAutoScroll","dragOverCompleted","dragOverBubble","nulling","ogElemScroller","newElem","SettingsPage","_ExtensionPage","buttonsCustomizationList","loadResults","initSort","getElementById","onEnd","updateSort","_e$from","buttonsCustomizationOrder","itemID","attribute","parseResults","results","_this$buttonsCustomiz","ExtensionPage","ButtonsCustomization","_Model","Model","add","models","registerPage"],"sourceRoot":""}