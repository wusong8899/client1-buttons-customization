(function(H,zr,zt,On,It,Fr,Ft){"use strict";function qr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var De,In;function Nt(){if(In)return De;In=1;function r(t,e,n,o,s,f){return{tag:t,key:e,attrs:n,children:o,text:s,dom:f,is:void 0,domSize:void 0,state:void 0,events:void 0,instance:void 0}}return r.normalize=function(t){return Array.isArray(t)?r("[",void 0,void 0,r.normalizeChildren(t),void 0,void 0):t==null||typeof t=="boolean"?null:typeof t=="object"?t:r("#",void 0,void 0,String(t),void 0,void 0)},r.normalizeChildren=function(t){var e=[];if(t.length){for(var n=t[0]!=null&&t[0].key!=null,o=1;o<t.length;o++)if((t[o]!=null&&t[o].key!=null)!==n)throw new TypeError(n&&(t[o]==null||typeof t[o]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var o=0;o<t.length;o++)e[o]=r.normalize(t[o])}return e},De=r,De}var _e,Nn;function xn(){if(Nn)return _e;Nn=1;var r=Nt();return _e=function(){var t=arguments[this],e=this+1,n;if(t==null?t={}:(typeof t!="object"||t.tag!=null||Array.isArray(t))&&(t={},e=this),arguments.length===e+1)n=arguments[e],Array.isArray(n)||(n=[n]);else for(n=[];e<arguments.length;)n.push(arguments[e++]);return r("",t.key,t,n)},_e}var Ce,Rn;function Se(){return Rn||(Rn=1,Ce={}.hasOwnProperty),Ce}var Te,Pn;function An(){if(Pn)return Te;Pn=1;var r=Nt(),t=xn(),e=Se(),n=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,o=Object.create(null);function s(h){for(var d in h)if(e.call(h,d))return!1;return!0}function f(h){for(var d,p="div",b=[],E={};d=n.exec(h);){var D=d[1],y=d[2];if(D===""&&y!=="")p=y;else if(D==="#")E.id=y;else if(D===".")b.push(y);else if(d[3][0]==="["){var N=d[6];N&&(N=N.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),d[4]==="class"?b.push(N):E[d[4]]=N===""?N:N||!0}}return b.length>0&&(E.className=b.join(" ")),s(E)&&(E=null),o[h]={tag:p,attrs:E}}function u(h,d){var p=d.attrs,b=e.call(p,"class"),E=b?p.class:p.className;return d.tag=h.tag,h.attrs!=null?(p=Object.assign({},h.attrs,p),(E!=null||h.attrs.className!=null)&&(p.className=E!=null?h.attrs.className!=null?String(h.attrs.className)+" "+String(E):E:h.attrs.className!=null?h.attrs.className:null)):E!=null&&(p.className=E),b&&(p.class=null),h.tag==="input"&&e.call(p,"type")&&(p=Object.assign({type:p.type},p)),d.is=p.is,d.attrs=p,d}function c(h){if(h==null||typeof h!="string"&&typeof h!="function"&&typeof h.view!="function")throw Error("The selector must be either a string or a component.");var d=t.apply(1,arguments);return typeof h=="string"&&(d.children=r.normalizeChildren(d.children),h!=="[")?u(o[h]||f(h),d):(d.tag=h,d)}return Te=c,Te}var Oe,zn;function Mr(){if(zn)return Oe;zn=1;var r=Nt();return Oe=function(t){return t==null&&(t=""),r("<",void 0,void 0,t,void 0,void 0)},Oe}var Ie,Fn;function Br(){if(Fn)return Ie;Fn=1;var r=Nt(),t=xn();return Ie=function(){var e=t.apply(0,arguments);return e.tag="[",e.children=r.normalizeChildren(e.children),e},Ie}var Ne,qn;function Lr(){if(qn)return Ne;qn=1;var r=An();return r.trust=Mr(),r.fragment=Br(),Ne=r,Ne}var xe,Mn;function Bn(){if(Mn)return xe;Mn=1;var r=new WeakMap;function*t(e){var n=e.dom,o=e.domSize,s=r.get(n);if(n!=null)do{var f=n.nextSibling;r.get(n)===s&&(yield n,o--),n=f}while(o)}return xe={delayedRemoval:r,domFor:t},xe}var Re,Ln;function Hr(){if(Ln)return Re;Ln=1;var r=Nt(),t=Bn(),e=t.delayedRemoval,n=t.domFor;return Re=function(){var o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},s,f;function u(a){return a.ownerDocument}function c(a){return a.attrs&&a.attrs.xmlns||o[a.tag]}function h(a,i){if(a.state!==i)throw new Error("'vnode.state' must not be modified.")}function d(a){var i=a.state;try{return this.apply(i,arguments)}finally{h(a,i)}}function p(a){try{return u(a).activeElement}catch{return null}}function b(a,i,l,m,g,w,q){for(var B=l;B<m;B++){var _=i[B];_!=null&&E(a,_,g,q,w)}}function E(a,i,l,m,g){var w=i.tag;if(typeof w=="string")switch(i.state={},i.attrs!=null&&yn(i.attrs,i,l),w){case"#":D(a,i,g);break;case"<":N(a,i,m,g);break;case"[":W(a,i,l,m,g);break;default:$(a,i,l,m,g)}else it(a,i,l,m,g)}function D(a,i,l){i.dom=u(a).createTextNode(i.children),J(a,i.dom,l)}var y={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function N(a,i,l,m){var g=i.children.match(/^\s*?<(\w+)/im)||[],w=u(a).createElement(y[g[1]]||"div");l==="http://www.w3.org/2000/svg"?(w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+i.children+"</svg>",w=w.firstChild):w.innerHTML=i.children,i.dom=w.firstChild,i.domSize=w.childNodes.length;for(var q=u(a).createDocumentFragment(),B;B=w.firstChild;)q.appendChild(B);J(a,q,m)}function W(a,i,l,m,g){var w=u(a).createDocumentFragment();if(i.children!=null){var q=i.children;b(w,q,0,q.length,l,null,m)}i.dom=w.firstChild,i.domSize=w.childNodes.length,J(a,w,g)}function $(a,i,l,m,g){var w=i.tag,q=i.attrs,B=i.is;m=c(i)||m;var _=m?B?u(a).createElementNS(m,w,{is:B}):u(a).createElementNS(m,w):B?u(a).createElement(w,{is:B}):u(a).createElement(w);if(i.dom=_,q!=null&&Di(i,q,m),J(a,_,g),!_t(i)&&i.children!=null){var L=i.children;b(_,L,0,L.length,l,null,m),i.tag==="select"&&q!=null&&Ci(i,q)}}function V(a,i){var l;if(typeof a.tag.view=="function"){if(a.state=Object.create(a.tag),l=a.state.view,l.$$reentrantLock$$!=null)return;l.$$reentrantLock$$=!0}else{if(a.state=void 0,l=a.tag,l.$$reentrantLock$$!=null)return;l.$$reentrantLock$$=!0,a.state=a.tag.prototype!=null&&typeof a.tag.prototype.view=="function"?new a.tag(a):a.tag(a)}if(yn(a.state,a,i),a.attrs!=null&&yn(a.attrs,a,i),a.instance=r.normalize(d.call(a.state.view,a)),a.instance===a)throw Error("A view cannot return the vnode it received as argument");l.$$reentrantLock$$=null}function it(a,i,l,m,g){V(i,l),i.instance!=null?(E(a,i.instance,l,m,g),i.dom=i.instance.dom,i.domSize=i.dom!=null?i.instance.domSize:0):i.domSize=0}function tt(a,i,l,m,g,w){if(!(i===l||i==null&&l==null))if(i==null||i.length===0)b(a,l,0,l.length,m,g,w);else if(l==null||l.length===0)Ot(a,i,0,i.length);else{var q=i[0]!=null&&i[0].key!=null,B=l[0]!=null&&l[0].key!=null,_=0,L=0;if(!q)for(;L<i.length&&i[L]==null;)L++;if(!B)for(;_<l.length&&l[_]==null;)_++;if(q!==B)Ot(a,i,L,i.length),b(a,l,_,l.length,m,g,w);else if(B){for(var ct=i.length-1,at=l.length-1,Ee,ht,et,ut,G,Dn;ct>=L&&at>=_&&(ut=i[ct],G=l[at],ut.key===G.key);)ut!==G&&A(a,ut,G,m,g,w),G.dom!=null&&(g=G.dom),ct--,at--;for(;ct>=L&&at>=_&&(ht=i[L],et=l[_],ht.key===et.key);)L++,_++,ht!==et&&A(a,ht,et,m,j(i,L,g),w);for(;ct>=L&&at>=_&&!(_===at||ht.key!==G.key||ut.key!==et.key);)Dn=j(i,L,g),x(a,ut,Dn),ut!==et&&A(a,ut,et,m,Dn,w),++_<=--at&&x(a,ht,g),ht!==G&&A(a,ht,G,m,g,w),G.dom!=null&&(g=G.dom),L++,ct--,ut=i[ct],G=l[at],ht=i[L],et=l[_];for(;ct>=L&&at>=_&&ut.key===G.key;)ut!==G&&A(a,ut,G,m,g,w),G.dom!=null&&(g=G.dom),ct--,at--,ut=i[ct],G=l[at];if(_>at)Ot(a,i,L,ct+1);else if(L>ct)b(a,l,_,at+1,m,g,w);else{var Ii=g,Ar=at-_+1,ie=new Array(Ar),_n=0,Z=0,Cn=2147483647,Sn=0,Ee,Tn;for(Z=0;Z<Ar;Z++)ie[Z]=-1;for(Z=at;Z>=_;Z--){Ee==null&&(Ee=z(i,L,ct+1)),G=l[Z];var Gt=Ee[G.key];Gt!=null&&(Cn=Gt<Cn?Gt:-1,ie[Z-_]=Gt,ut=i[Gt],i[Gt]=null,ut!==G&&A(a,ut,G,m,g,w),G.dom!=null&&(g=G.dom),Sn++)}if(g=Ii,Sn!==ct-L+1&&Ot(a,i,L,ct+1),Sn===0)b(a,l,_,at+1,m,g,w);else if(Cn===-1)for(Tn=U(ie),_n=Tn.length-1,Z=at;Z>=_;Z--)et=l[Z],ie[Z-_]===-1?E(a,et,m,w,g):Tn[_n]===Z-_?_n--:x(a,et,g),et.dom!=null&&(g=l[Z].dom);else for(Z=at;Z>=_;Z--)et=l[Z],ie[Z-_]===-1&&E(a,et,m,w,g),et.dom!=null&&(g=l[Z].dom)}}else{var En=i.length<l.length?i.length:l.length;for(_=_<L?_:L;_<En;_++)ht=i[_],et=l[_],!(ht===et||ht==null&&et==null)&&(ht==null?E(a,et,m,w,j(i,_+1,g)):et==null?Ut(a,ht):A(a,ht,et,m,j(i,_+1,g),w));i.length>En&&Ot(a,i,_,i.length),l.length>En&&b(a,l,_,l.length,m,g,w)}}}function A(a,i,l,m,g,w){var q=i.tag,B=l.tag;if(q===B&&i.is===l.is){if(l.state=i.state,l.events=i.events,Oi(l,i))return;if(typeof q=="string")switch(l.attrs!=null&&wn(l.attrs,l,m),q){case"#":lt(i,l);break;case"<":X(a,i,l,w,g);break;case"[":K(a,i,l,m,g,w);break;default:M(i,l,m,w)}else O(a,i,l,m,g,w)}else Ut(a,i),E(a,l,m,w,g)}function lt(a,i){a.children.toString()!==i.children.toString()&&(a.dom.nodeValue=i.children),i.dom=a.dom}function X(a,i,l,m,g){i.children!==l.children?(Ir(a,i),N(a,l,m,g)):(l.dom=i.dom,l.domSize=i.domSize)}function K(a,i,l,m,g,w){tt(a,i.children,l.children,m,g,w);var q=0,B=l.children;if(l.dom=null,B!=null){for(var _=0;_<B.length;_++){var L=B[_];L!=null&&L.dom!=null&&(l.dom==null&&(l.dom=L.dom),q+=L.domSize||1)}q!==1&&(l.domSize=q)}}function M(a,i,l,m){var g=i.dom=a.dom;m=c(i)||m,Si(i,a.attrs,i.attrs,m),_t(i)||tt(g,a.children,i.children,l,null,m)}function O(a,i,l,m,g,w){if(l.instance=r.normalize(d.call(l.state.view,l)),l.instance===l)throw Error("A view cannot return the vnode it received as argument");wn(l.state,l,m),l.attrs!=null&&wn(l.attrs,l,m),l.instance!=null?(i.instance==null?E(a,l.instance,m,w,g):A(a,i.instance,l.instance,m,g,w),l.dom=l.instance.dom,l.domSize=l.instance.domSize):i.instance!=null?(Ut(a,i.instance),l.dom=void 0,l.domSize=0):(l.dom=i.dom,l.domSize=i.domSize)}function z(a,i,l){for(var m=Object.create(null);i<l;i++){var g=a[i];if(g!=null){var w=g.key;w!=null&&(m[w]=i)}}return m}var I=[];function U(a){for(var i=[0],l=0,m=0,g=0,w=I.length=a.length,g=0;g<w;g++)I[g]=a[g];for(var g=0;g<w;++g)if(a[g]!==-1){var q=i[i.length-1];if(a[q]<a[g]){I[g]=q,i.push(g);continue}for(l=0,m=i.length-1;l<m;){var B=(l>>>1)+(m>>>1)+(l&m&1);a[i[B]]<a[g]?l=B+1:m=B}a[g]<a[i[l]]&&(l>0&&(I[g]=i[l-1]),i[l]=g)}for(l=i.length,m=i[l-1];l-- >0;)i[l]=m,m=I[m];return I.length=0,i}function j(a,i,l){for(;i<a.length;i++)if(a[i]!=null&&a[i].dom!=null)return a[i].dom;return l}function x(a,i,l){if(i.dom!=null){var m;if(i.domSize==null)m=i.dom;else{m=u(a).createDocumentFragment();for(var g of n(i))m.appendChild(g)}J(a,m,l)}}function J(a,i,l){l!=null?a.insertBefore(i,l):a.appendChild(i)}function _t(a){if(a.attrs==null||a.attrs.contenteditable==null&&a.attrs.contentEditable==null)return!1;var i=a.children;if(i!=null&&i.length===1&&i[0].tag==="<"){var l=i[0].children;a.dom.innerHTML!==l&&(a.dom.innerHTML=l)}else if(i!=null&&i.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function Ot(a,i,l,m){for(var g=l;g<m;g++){var w=i[g];w!=null&&Ut(a,w)}}function At(a,i,l,m){var g=i.state,w=d.call(l.onbeforeremove,i);if(w!=null){var q=f;for(var B of n(i))e.set(B,q);m.v++,Promise.resolve(w).finally(function(){h(i,g),wt(a,i,m)})}}function wt(a,i,l){--l.v===0&&(gn(i),Ir(a,i))}function Ut(a,i){var l={v:1};typeof i.tag!="string"&&typeof i.state.onbeforeremove=="function"&&At(a,i,i.state,l),i.attrs&&typeof i.attrs.onbeforeremove=="function"&&At(a,i,i.attrs,l),wt(a,i,l)}function Ir(a,i){if(i.dom!=null)if(i.domSize==null)a.removeChild(i.dom);else for(var l of n(i))a.removeChild(l)}function gn(a){if(typeof a.tag!="string"&&typeof a.state.onremove=="function"&&d.call(a.state.onremove,a),a.attrs&&typeof a.attrs.onremove=="function"&&d.call(a.attrs.onremove,a),typeof a.tag!="string")a.instance!=null&&gn(a.instance);else{a.events!=null&&(a.events._=null);var i=a.children;if(Array.isArray(i))for(var l=0;l<i.length;l++){var m=i[l];m!=null&&gn(m)}}}function Di(a,i,l){for(var m in i)vn(a,m,null,i[m],l)}function vn(a,i,l,m,g){if(!(i==="key"||m==null||Nr(i)||l===m&&!Ti(a,i)&&typeof m!="object")){if(i[0]==="o"&&i[1]==="n")return Pr(a,i,m);if(i.slice(0,6)==="xlink:")a.dom.setAttributeNS("http://www.w3.org/1999/xlink",i.slice(6),m);else if(i==="style")Rr(a.dom,l,m);else if(xr(a,i,g)){if(i==="value"){if((a.tag==="input"||a.tag==="textarea")&&a.dom.value===""+m||a.tag==="select"&&l!==null&&a.dom.value===""+m||a.tag==="option"&&l!==null&&a.dom.value===""+m)return;if(a.tag==="input"&&a.attrs.type==="file"&&""+m!=""){console.error("`value` is read-only on file inputs!");return}}a.tag==="input"&&i==="type"?a.dom.setAttribute(i,m):a.dom[i]=m}else typeof m=="boolean"?m?a.dom.setAttribute(i,""):a.dom.removeAttribute(i):a.dom.setAttribute(i==="className"?"class":i,m)}}function _i(a,i,l,m){if(!(i==="key"||l==null||Nr(i)))if(i[0]==="o"&&i[1]==="n")Pr(a,i,void 0);else if(i==="style")Rr(a.dom,l,null);else if(xr(a,i,m)&&i!=="className"&&i!=="title"&&!(i==="value"&&(a.tag==="option"||a.tag==="select"&&a.dom.selectedIndex===-1&&a.dom===p(a.dom)))&&!(a.tag==="input"&&i==="type"))a.dom[i]=null;else{var g=i.indexOf(":");g!==-1&&(i=i.slice(g+1)),l!==!1&&a.dom.removeAttribute(i==="className"?"class":i)}}function Ci(a,i){if("value"in i)if(i.value===null)a.dom.selectedIndex!==-1&&(a.dom.value=null);else{var l=""+i.value;(a.dom.value!==l||a.dom.selectedIndex===-1)&&(a.dom.value=l)}"selectedIndex"in i&&vn(a,"selectedIndex",null,i.selectedIndex,void 0)}function Si(a,i,l,m){var g;if(i!=null){i===l&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major");for(var w in i)(g=i[w])!=null&&(l==null||l[w]==null)&&_i(a,w,g,m)}if(l!=null)for(var w in l)vn(a,w,i&&i[w],l[w],m)}function Ti(a,i){return i==="value"||i==="checked"||i==="selectedIndex"||i==="selected"&&(a.dom===p(a.dom)||a.tag==="option"&&a.dom.parentNode===p(a.dom))}function Nr(a){return a==="oninit"||a==="oncreate"||a==="onupdate"||a==="onremove"||a==="onbeforeremove"||a==="onbeforeupdate"}function xr(a,i,l){return l===void 0&&(a.tag.indexOf("-")>-1||a.is||i!=="href"&&i!=="list"&&i!=="form"&&i!=="width"&&i!=="height")&&i in a.dom}function Rr(a,i,l){if(i!==l)if(l==null)a.style="";else if(typeof l!="object")a.style=l;else if(i==null||typeof i!="object"){a.style="";for(var m in l){var g=l[m];g!=null&&(m.includes("-")?a.style.setProperty(m,String(g)):a.style[m]=String(g))}}else{for(var m in i)i[m]!=null&&l[m]==null&&(m.includes("-")?a.style.removeProperty(m):a.style[m]="");for(var m in l){var g=l[m];g!=null&&(g=String(g))!==String(i[m])&&(m.includes("-")?a.style.setProperty(m,g):a.style[m]=g)}}}function bn(){this._=s}bn.prototype=Object.create(null),bn.prototype.handleEvent=function(a){var i=this["on"+a.type],l;typeof i=="function"?l=i.call(a.currentTarget,a):typeof i.handleEvent=="function"&&i.handleEvent(a);var m=this;m._!=null&&(a.redraw!==!1&&(0,m._)(),l!=null&&typeof l.then=="function"&&Promise.resolve(l).then(function(){m._!=null&&a.redraw!==!1&&(0,m._)()})),l===!1&&(a.preventDefault(),a.stopPropagation())};function Pr(a,i,l){if(a.events!=null){if(a.events._=s,a.events[i]===l)return;l!=null&&(typeof l=="function"||typeof l=="object")?(a.events[i]==null&&a.dom.addEventListener(i.slice(2),a.events,!1),a.events[i]=l):(a.events[i]!=null&&a.dom.removeEventListener(i.slice(2),a.events,!1),a.events[i]=void 0)}else l!=null&&(typeof l=="function"||typeof l=="object")&&(a.events=new bn,a.dom.addEventListener(i.slice(2),a.events,!1),a.events[i]=l)}function yn(a,i,l){typeof a.oninit=="function"&&d.call(a.oninit,i),typeof a.oncreate=="function"&&l.push(d.bind(a.oncreate,i))}function wn(a,i,l){typeof a.onupdate=="function"&&l.push(d.bind(a.onupdate,i))}function Oi(a,i){do{if(a.attrs!=null&&typeof a.attrs.onbeforeupdate=="function"){var l=d.call(a.attrs.onbeforeupdate,a,i);if(l!==void 0&&!l)break}if(typeof a.tag!="string"&&typeof a.state.onbeforeupdate=="function"){var l=d.call(a.state.onbeforeupdate,a,i);if(l!==void 0&&!l)break}return!1}while(!1);return a.dom=i.dom,a.domSize=i.domSize,a.instance=i.instance,a.attrs=i.attrs,a.children=i.children,a.text=i.text,!0}var re;return function(a,i,l){if(!a)throw new TypeError("DOM element being rendered to does not exist.");if(re!=null&&a.contains(re))throw new TypeError("Node is currently being rendered to and thus is locked.");var m=s,g=re,w=[],q=p(a),B=a.namespaceURI;re=a,s=typeof l=="function"?l:void 0,f={};try{a.vnodes==null&&(a.textContent=""),i=r.normalizeChildren(Array.isArray(i)?i:[i]),tt(a,a.vnodes,i,w,null,B==="http://www.w3.org/1999/xhtml"?void 0:B),a.vnodes=i,q!=null&&p(a)!==q&&typeof q.focus=="function"&&q.focus();for(var _=0;_<w.length;_++)w[_]()}finally{s=m,re=g}}},Re}var Pe,Hn;function jn(){return Hn||(Hn=1,Pe=Hr()(typeof window<"u"?window:null)),Pe}var Ae,Xn;function jr(){if(Xn)return Ae;Xn=1;var r=Nt();return Ae=function(t,e,n){var o=[],s=!1,f=-1;function u(){for(f=0;f<o.length;f+=2)try{t(o[f],r(o[f+1]),c)}catch(d){n.error(d)}f=-1}function c(){s||(s=!0,e(function(){s=!1,u()}))}c.sync=u;function h(d,p){if(p!=null&&p.view==null&&typeof p!="function")throw new TypeError("m.mount expects a component, not a vnode.");var b=o.indexOf(d);b>=0&&(o.splice(b,2),b<=f&&(f-=2),t(d,[])),p!=null&&(o.push(d,p),t(d,r(p),c))}return{mount:h,redraw:c}},Ae}var ze,Yn;function Fe(){if(Yn)return ze;Yn=1;var r=jn();return ze=jr()(r,typeof requestAnimationFrame<"u"?requestAnimationFrame:null,typeof console<"u"?console:null),ze}var qe,$n;function Un(){return $n||($n=1,qe=function(r){if(Object.prototype.toString.call(r)!=="[object Object]")return"";var t=[];for(var e in r)n(e,r[e]);return t.join("&");function n(o,s){if(Array.isArray(s))for(var f=0;f<s.length;f++)n(o+"["+f+"]",s[f]);else if(Object.prototype.toString.call(s)==="[object Object]")for(var f in s)n(o+"["+f+"]",s[f]);else t.push(encodeURIComponent(o)+(s!=null&&s!==""?"="+encodeURIComponent(s):""))}}),qe}var Me,Gn;function Be(){if(Gn)return Me;Gn=1;var r=Un();return Me=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(e==null)return t;var n=t.indexOf("?"),o=t.indexOf("#"),s=o<0?t.length:o,f=n<0?s:n,u=t.slice(0,f),c={};Object.assign(c,e);var h=u.replace(/:([^\/\.-]+)(\.{3})?/g,function(N,W,$){return delete c[W],e[W]==null?N:$?e[W]:encodeURIComponent(String(e[W]))}),d=h.indexOf("?"),p=h.indexOf("#"),b=p<0?h.length:p,E=d<0?b:d,D=h.slice(0,E);n>=0&&(D+=t.slice(n,s)),d>=0&&(D+=(n<0?"?":"&")+h.slice(d,b));var y=r(c);return y&&(D+=(n<0&&d<0?"?":"&")+y),o>=0&&(D+=t.slice(o)),p>=0&&(D+=(o<0?"":"&")+h.slice(p)),D},Me}var Le,kn;function Xr(){if(kn)return Le;kn=1;var r=Be(),t=Se();return Le=function(e,n){function o(u){return new Promise(u)}function s(u,c){return new Promise(function(h,d){u=r(u,c.params);var p=c.method!=null?c.method.toUpperCase():"GET",b=c.body,E=(c.serialize==null||c.serialize===JSON.serialize)&&!(b instanceof e.FormData||b instanceof e.URLSearchParams),D=c.responseType||(typeof c.extract=="function"?"":"json"),y=new e.XMLHttpRequest,N=!1,W=!1,$=y,V,it=y.abort;y.abort=function(){N=!0,it.call(this)},y.open(p,u,c.async!==!1,typeof c.user=="string"?c.user:void 0,typeof c.password=="string"?c.password:void 0),E&&b!=null&&!f(c,"content-type")&&y.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof c.deserialize!="function"&&!f(c,"accept")&&y.setRequestHeader("Accept","application/json, text/*"),c.withCredentials&&(y.withCredentials=c.withCredentials),c.timeout&&(y.timeout=c.timeout),y.responseType=D;for(var tt in c.headers)t.call(c.headers,tt)&&y.setRequestHeader(tt,c.headers[tt]);y.onreadystatechange=function(A){if(!N&&A.target.readyState===4)try{var lt=A.target.status>=200&&A.target.status<300||A.target.status===304||/^file:\/\//i.test(u),X=A.target.response,K;if(D==="json"){if(!A.target.responseType&&typeof c.extract!="function")try{X=JSON.parse(A.target.responseText)}catch{X=null}}else(!D||D==="text")&&X==null&&(X=A.target.responseText);if(typeof c.extract=="function"?(X=c.extract(A.target,c),lt=!0):typeof c.deserialize=="function"&&(X=c.deserialize(X)),lt){if(typeof c.type=="function")if(Array.isArray(X))for(var M=0;M<X.length;M++)X[M]=new c.type(X[M]);else X=new c.type(X);h(X)}else{var O=function(){try{K=A.target.responseText}catch{K=X}var z=new Error(K);z.code=A.target.status,z.response=X,d(z)};y.status===0?setTimeout(function(){W||O()}):O()}}catch(z){d(z)}},y.ontimeout=function(A){W=!0;var lt=new Error("Request timed out");lt.code=A.target.status,d(lt)},typeof c.config=="function"&&(y=c.config(y,c,u)||y,y!==$&&(V=y.abort,y.abort=function(){N=!0,V.call(this)})),b==null?y.send():typeof c.serialize=="function"?y.send(c.serialize(b)):b instanceof e.FormData||b instanceof e.URLSearchParams?y.send(b):y.send(JSON.stringify(b))})}o.prototype=Promise.prototype,o.__proto__=Promise;function f(u,c){for(var h in u.headers)if(t.call(u.headers,h)&&h.toLowerCase()===c)return!0;return!1}return{request:function(u,c){typeof u!="string"?(c=u,u=u.url):c==null&&(c={});var h=s(u,c);if(c.background===!0)return h;var d=0;function p(){--d===0&&typeof n=="function"&&n()}return b(h);function b(E){var D=E.then;return E.constructor=o,E.then=function(){d++;var y=D.apply(E,arguments);return y.then(p,function(N){if(p(),d===0)throw N}),b(y)},E}}}},Le}var He,Wn;function Yr(){if(Wn)return He;Wn=1;var r=Fe();return He=Xr()(typeof window<"u"?window:null,r.redraw),He}var je,Vn;function Kn(){if(Vn)return je;Vn=1;function r(t){try{return decodeURIComponent(t)}catch{return t}}return je=function(t){if(t===""||t==null)return{};t.charAt(0)==="?"&&(t=t.slice(1));for(var e=t.split("&"),n={},o={},s=0;s<e.length;s++){var f=e[s].split("="),u=r(f[0]),c=f.length===2?r(f[1]):"";c==="true"?c=!0:c==="false"&&(c=!1);var h=u.split(/\]\[?|\[/),d=o;u.indexOf("[")>-1&&h.pop();for(var p=0;p<h.length;p++){var b=h[p],E=h[p+1],D=E==""||!isNaN(parseInt(E,10));if(b===""){var u=h.slice(0,p).join();n[u]==null&&(n[u]=Array.isArray(d)?d.length:0),b=n[u]++}else if(b==="__proto__")break;if(p===h.length-1)d[b]=c;else{var y=Object.getOwnPropertyDescriptor(d,b);y!=null&&(y=y.value),y==null&&(d[b]=y=D?[]:{}),d=y}}}return o},je}var Xe,Qn;function Ye(){if(Qn)return Xe;Qn=1;var r=Kn();return Xe=function(t){var e=t.indexOf("?"),n=t.indexOf("#"),o=n<0?t.length:n,s=e<0?o:e,f=t.slice(0,s).replace(/\/{2,}/g,"/");return f?f[0]!=="/"&&(f="/"+f):f="/",{path:f,params:e<0?{}:r(t.slice(e+1,o))}},Xe}var $e,Jn;function $r(){if(Jn)return $e;Jn=1;var r=Ye();return $e=function(t){var e=r(t),n=Object.keys(e.params),o=[],s=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(f,u,c){return u==null?"\\"+f:(o.push({k:u,r:c==="..."}),c==="..."?"(.*)":c==="."?"([^/]+)\\.":"([^/]+)"+(c||""))})+"\\/?$");return function(f){for(var u=0;u<n.length;u++)if(e.params[n[u]]!==f.params[n[u]])return!1;if(!o.length)return s.test(f.path);var c=s.exec(f.path);if(c==null)return!1;for(var u=0;u<o.length;u++)f.params[o[u].k]=o[u].r?c[u+1]:decodeURIComponent(c[u+1]);return!0}},$e}var Ue,Zn;function tr(){if(Zn)return Ue;Zn=1;var r=Se(),t=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");return Ue=function(e,n){var o={};if(n!=null)for(var s in e)r.call(e,s)&&!t.test(s)&&n.indexOf(s)<0&&(o[s]=e[s]);else for(var s in e)r.call(e,s)&&!t.test(s)&&(o[s]=e[s]);return o},Ue}var Ge,er;function Ur(){if(er)return Ge;er=1;var r=Nt(),t=An(),e=Be(),n=Ye(),o=$r(),s=tr();function f(u){try{return decodeURIComponent(u)}catch{return u}}return Ge=function(u,c){var h=u==null?null:typeof u.setImmediate=="function"?u.setImmediate:u.setTimeout,d=Promise.resolve(),p=!1,b=!1,E=!1,D,y,N,W,$,V,it,tt,A={onremove:function(){b=E=!1,u.removeEventListener("popstate",K,!1)},view:function(){var O=r($,V.key,V);return W?W.render(O):[O]}},lt=M.SKIP={};function X(){p=!1;var O=u.location.hash;M.prefix[0]!=="#"&&(O=u.location.search+O,M.prefix[0]!=="?"&&(O=u.location.pathname+O,O[0]!=="/"&&(O="/"+O)));var z=O.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,f).slice(M.prefix.length),I=n(z);Object.assign(I.params,u.history.state);function U(x){console.error(x),M.set(N,null,{replace:!0})}j(0);function j(x){for(;x<y.length;x++)if(y[x].check(I)){var J=y[x].component,_t=y[x].route,Ot=J,At=tt=function(wt){if(At===tt){if(wt===lt)return j(x+1);$=wt!=null&&(typeof wt.view=="function"||typeof wt=="function")?wt:"div",V=I.params,it=z,tt=null,W=J.render?J:null,E?c.redraw():(E=!0,c.mount(D,A))}};J.view||typeof J=="function"?(J={},At(Ot)):J.onmatch?d.then(function(){return J.onmatch(I.params,z,_t)}).then(At,z===N?null:U):At();return}if(z===N)throw new Error("Could not resolve default route "+N+".");M.set(N,null,{replace:!0})}}function K(){p||(p=!0,h(X))}function M(O,z,I){if(!O)throw new TypeError("DOM element being rendered to does not exist.");if(y=Object.keys(I).map(function(j){if(j[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(j))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:j,component:I[j],check:o(j)}}),N=z,z!=null){var U=n(z);if(!y.some(function(j){return j.check(U)}))throw new ReferenceError("Default route doesn't match any known routes.")}D=O,u.addEventListener("popstate",K,!1),b=!0,X()}return M.set=function(O,z,I){if(tt!=null&&(I=I||{},I.replace=!0),tt=null,O=e(O,z),b){K();var U=I?I.state:null,j=I?I.title:null;I&&I.replace?u.history.replaceState(U,j,M.prefix+O):u.history.pushState(U,j,M.prefix+O)}else u.location.href=M.prefix+O},M.get=function(){return it},M.prefix="#!",M.Link={view:function(O){var z=t(O.attrs.selector||"a",s(O.attrs,["options","params","selector","onclick"]),O.children),I,U,j;return(z.attrs.disabled=!!z.attrs.disabled)?(z.attrs.href=null,z.attrs["aria-disabled"]="true"):(I=O.attrs.options,U=O.attrs.onclick,j=e(z.attrs.href,O.attrs.params),z.attrs.href=M.prefix+j,z.attrs.onclick=function(x){var J;typeof U=="function"?J=U.call(x.currentTarget,x):U==null||typeof U!="object"||typeof U.handleEvent=="function"&&U.handleEvent(x),J!==!1&&!x.defaultPrevented&&(x.button===0||x.which===0||x.which===1)&&(!x.currentTarget.target||x.currentTarget.target==="_self")&&!x.ctrlKey&&!x.metaKey&&!x.shiftKey&&!x.altKey&&(x.preventDefault(),x.redraw=!1,M.set(j,null,I))}),z}},M.param=function(O){return V&&O!=null?V[O]:V},M},Ge}var ke,nr;function Gr(){if(nr)return ke;nr=1;var r=Fe();return ke=Ur()(typeof window<"u"?window:null,r),ke}var We,rr;function kr(){if(rr)return We;rr=1;var r=Lr(),t=Yr(),e=Fe(),n=Bn(),o=function(){return r.apply(this,arguments)};return o.m=r,o.trust=r.trust,o.fragment=r.fragment,o.Fragment="[",o.mount=e.mount,o.route=Gr(),o.render=jn(),o.redraw=e.redraw,o.request=t.request,o.parseQueryString=Kn(),o.buildQueryString=Un(),o.parsePathname=Ye(),o.buildPathname=Be(),o.vnode=Nt(),o.censor=tr(),o.domFor=n.domFor,We=o,We}var Wr=kr();const F=qr(Wr),dn=class dn extends On{oninit(t){super.oninit(t),this.ButtonsCustomizationItemData=this.attrs.ButtonsCustomizationItemData,this.settingType="add",this.loading=!1,this.ButtonsCustomizationItemData?(this.settingType="edit",this.itemName=It(this.ButtonsCustomizationItemData.name()),this.itemUrl=It(this.ButtonsCustomizationItemData.url()),this.itemIcon=It(this.ButtonsCustomizationItemData.icon()),this.itemColor=It(this.ButtonsCustomizationItemData.color())):(this.itemName=It(""),this.itemUrl=It(""),this.itemIcon=It(""),this.itemColor=It(""))}className(){return"Modal--medium"}title(){return this.settingType==="add"?H.translator.trans("client1-buttons-customization.admin.settings.item-add"):H.translator.trans("client1-buttons-customization.admin.settings.item-edit")}content(){return F("div",{className:"Modal-body"},[F("div",{className:"Form"},[F("div",{className:"Form-group",style:"text-align: center;"},[F("div",[F("div",{className:"GuaGuaLeSettingsLabel"},H.translator.trans("client1-buttons-customization.admin.settings.item-name")),F("input",{maxlength:255,required:!0,className:"FormControl",value:this.itemName(),oninput:t=>this.itemName(t.target.value)}),F("div",{className:"GuaGuaLeSettingsLabel"},H.translator.trans("client1-buttons-customization.admin.settings.item-url")),F("input",{maxlength:500,required:!0,className:"FormControl",value:this.itemUrl(),oninput:t=>this.itemUrl(t.target.value)}),F("div",{className:"GuaGuaLeSettingsLabel"},H.translator.trans("client1-buttons-customization.admin.settings.item-icon")),F("input",{maxlength:50,required:!0,className:"FormControl",value:this.itemIcon(),oninput:t=>this.itemIcon(t.target.value)})])]),F("div",{className:"Form-group",style:"text-align: center;"},[F(zt,{className:"Button Button--primary",type:"submit",loading:this.loading},H.translator.trans("client1-buttons-customization.admin.confirm"))," ",F(zt,{className:"Button guagualeButton--gray",loading:this.loading,onclick:()=>this.hide()},H.translator.trans("client1-buttons-customization.admin.cancel"))])])])}onsubmit(t){t.preventDefault(),this.loading=!0,this.settingType==="edit"&&this.ButtonsCustomizationItemData?this.ButtonsCustomizationItemData.save({name:this.itemName(),url:this.itemUrl(),icon:this.itemIcon(),color:this.itemColor()}).then(()=>this.hide()).catch(e=>{this.loading=!1,this.handleErrors(e)}):H.store.createRecord("buttonsCustomizationList").save({name:this.itemName(),url:this.itemUrl(),icon:this.itemIcon(),color:this.itemColor()}).then(()=>{location.reload()}).catch(e=>{this.loading=!1,this.handleErrors(e)})}handleErrors(t){console.error("ButtonsCustomizationAddModal error",t),H.alerts.show({type:"error"},H.translator.trans("client1-buttons-customization.admin.save-error"))}};dn.isDismissible=!1;let ae=dn;const pn=class pn extends On{oninit(t){super.oninit(t),this.ButtonsCustomizationItemData=this.attrs.ButtonsCustomizationItemData,this.loading=!1}className(){return"Modal--small"}title(){return H.translator.trans("client1-buttons-customization.admin.settings.item-delete-confirmation")}content(){return F("div",{className:"Modal-body"},[F("div",{className:"Form-group",style:"text-align: center;"},[F(zt,{className:"Button Button--primary",type:"submit",loading:this.loading},H.translator.trans("client1-buttons-customization.admin.confirm"))," ",F(zt,{className:"Button guagualeButton--gray",loading:this.loading,onclick:()=>this.hide()},H.translator.trans("client1-buttons-customization.admin.cancel"))])])}onsubmit(t){t.preventDefault(),this.loading=!0,this.ButtonsCustomizationItemData.delete().then(()=>{location.reload()})}};pn.isDismissible=!1;let Ve=pn;class Vr extends Fr{view(){const{ButtonsCustomizationItemData:t}=this.attrs,e=t.id(),n=t.name(),o=t.url(),s=t.icon();return F("div",{style:"border: 1px dotted var(--control-color);padding: 10px;border-radius: 4px;"},[F("div",[F("div",{style:"padding-top: 5px;"},[F(zt,{className:"Button Button--primary",onclick:()=>this.editItem(t)},H.translator.trans("client1-buttons-customization.admin.settings.item-edit"))," ",F(zt,{className:"Button Button--danger",style:"font-weight:bold;width:66px;",onclick:()=>this.deleteItem(t)},H.translator.trans("client1-buttons-customization.admin.settings.item-delete"))," ",F("b",H.translator.trans("client1-buttons-customization.admin.settings.item-id")+": "),e," | ",F("i",{className:s})," ",F("b",H.translator.trans("client1-buttons-customization.admin.settings.item-name")+": "),n," | ",F("b",H.translator.trans("client1-buttons-customization.admin.settings.item-url")+": "),o," "])])])}editItem(t){H.modal.show(ae,{ButtonsCustomizationItemData:t})}deleteItem(t){H.modal.show(Ve,{ButtonsCustomizationItemData:t})}}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ir(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)}return e}function Et(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ir(Object(e),!0).forEach(function(n){Kr(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ir(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function oe(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oe=function(t){return typeof t}:oe=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(r)}function Kr(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Ct(){return Ct=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Ct.apply(this,arguments)}function Qr(r,t){if(r==null)return{};var e={},n=Object.keys(r),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(e[o]=r[o]);return e}function Jr(r,t){if(r==null)return{};var e=Qr(r,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}var Zr="1.15.6";function St(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var Tt=St(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),kt=St(/Edge/i),ar=St(/firefox/i),Wt=St(/safari/i)&&!St(/chrome/i)&&!St(/android/i),Ke=St(/iP(ad|od|hone)/i),or=St(/chrome/i)&&St(/android/i),lr={capture:!1,passive:!1};function P(r,t,e){r.addEventListener(t,e,!Tt&&lr)}function R(r,t,e){r.removeEventListener(t,e,!Tt&&lr)}function le(r,t){if(t){if(t[0]===">"&&(t=t.substring(1)),r)try{if(r.matches)return r.matches(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t)}catch{return!1}return!1}}function sr(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function bt(r,t,e,n){if(r){e=e||document;do{if(t!=null&&(t[0]===">"?r.parentNode===e&&le(r,t):le(r,t))||n&&r===e)return r;if(r===e)break}while(r=sr(r))}return null}var ur=/\s+/g;function pt(r,t,e){if(r&&t)if(r.classList)r.classList[e?"add":"remove"](t);else{var n=(" "+r.className+" ").replace(ur," ").replace(" "+t+" "," ");r.className=(n+(e?" "+t:"")).replace(ur," ")}}function C(r,t,e){var n=r&&r.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(e=r.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function Lt(r,t){var e="";if(typeof r=="string")e=r;else do{var n=C(r,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(r=r.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(e)}function fr(r,t,e){if(r){var n=r.getElementsByTagName(t),o=0,s=n.length;if(e)for(;o<s;o++)e(n[o],o);return n}return[]}function Dt(){var r=document.scrollingElement;return r||document.documentElement}function nt(r,t,e,n,o){if(!(!r.getBoundingClientRect&&r!==window)){var s,f,u,c,h,d,p;if(r!==window&&r.parentNode&&r!==Dt()?(s=r.getBoundingClientRect(),f=s.top,u=s.left,c=s.bottom,h=s.right,d=s.height,p=s.width):(f=0,u=0,c=window.innerHeight,h=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(t||e)&&r!==window&&(o=o||r.parentNode,!Tt))do if(o&&o.getBoundingClientRect&&(C(o,"transform")!=="none"||e&&C(o,"position")!=="static")){var b=o.getBoundingClientRect();f-=b.top+parseInt(C(o,"border-top-width")),u-=b.left+parseInt(C(o,"border-left-width")),c=f+s.height,h=u+s.width;break}while(o=o.parentNode);if(n&&r!==window){var E=Lt(o||r),D=E&&E.a,y=E&&E.d;E&&(f/=y,u/=D,p/=D,d/=y,c=f+d,h=u+p)}return{top:f,left:u,bottom:c,right:h,width:p,height:d}}}function cr(r,t,e){for(var n=xt(r,!0),o=nt(r)[t];n;){var s=nt(n)[e],f=void 0;if(f=o>=s,!f)return n;if(n===Dt())break;n=xt(n,!1)}return!1}function Ht(r,t,e,n){for(var o=0,s=0,f=r.children;s<f.length;){if(f[s].style.display!=="none"&&f[s]!==S.ghost&&(n||f[s]!==S.dragged)&&bt(f[s],e.draggable,r,!1)){if(o===t)return f[s];o++}s++}return null}function Qe(r,t){for(var e=r.lastElementChild;e&&(e===S.ghost||C(e,"display")==="none"||t&&!le(e,t));)e=e.previousElementSibling;return e||null}function vt(r,t){var e=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==S.clone&&(!t||le(r,t))&&e++;return e}function hr(r){var t=0,e=0,n=Dt();if(r)do{var o=Lt(r),s=o.a,f=o.d;t+=r.scrollLeft*s,e+=r.scrollTop*f}while(r!==n&&(r=r.parentNode));return[t,e]}function ti(r,t){for(var e in r)if(r.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===r[e][n])return Number(e)}return-1}function xt(r,t){if(!r||!r.getBoundingClientRect)return Dt();var e=r,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var o=C(e);if(e.clientWidth<e.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Dt();if(n||t)return e;n=!0}}while(e=e.parentNode);return Dt()}function ei(r,t){if(r&&t)for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function Je(r,t){return Math.round(r.top)===Math.round(t.top)&&Math.round(r.left)===Math.round(t.left)&&Math.round(r.height)===Math.round(t.height)&&Math.round(r.width)===Math.round(t.width)}var Vt;function mr(r,t){return function(){if(!Vt){var e=arguments,n=this;e.length===1?r.call(n,e[0]):r.apply(n,e),Vt=setTimeout(function(){Vt=void 0},t)}}}function ni(){clearTimeout(Vt),Vt=void 0}function dr(r,t,e){r.scrollLeft+=t,r.scrollTop+=e}function pr(r){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(r).cloneNode(!0):e?e(r).clone(!0)[0]:r.cloneNode(!0)}function gr(r,t,e){var n={};return Array.from(r.children).forEach(function(o){var s,f,u,c;if(!(!bt(o,t.draggable,r,!1)||o.animated||o===e)){var h=nt(o);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,h.left),n.top=Math.min((f=n.top)!==null&&f!==void 0?f:1/0,h.top),n.right=Math.max((u=n.right)!==null&&u!==void 0?u:-1/0,h.right),n.bottom=Math.max((c=n.bottom)!==null&&c!==void 0?c:-1/0,h.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var mt="Sortable"+new Date().getTime();function ri(){var r=[],t;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(C(o,"display")==="none"||o===S.ghost)){r.push({target:o,rect:nt(o)});var s=Et({},r[r.length-1].rect);if(o.thisAnimationDuration){var f=Lt(o,!0);f&&(s.top-=f.f,s.left-=f.e)}o.fromRect=s}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(ti(r,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var s=!1,f=0;r.forEach(function(u){var c=0,h=u.target,d=h.fromRect,p=nt(h),b=h.prevFromRect,E=h.prevToRect,D=u.rect,y=Lt(h,!0);y&&(p.top-=y.f,p.left-=y.e),h.toRect=p,h.thisAnimationDuration&&Je(b,p)&&!Je(d,p)&&(D.top-p.top)/(D.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(c=ai(D,b,E,o.options)),Je(p,d)||(h.prevFromRect=d,h.prevToRect=p,c||(c=o.options.animation),o.animate(h,D,p,c)),c&&(s=!0,f=Math.max(f,c),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},c),h.thisAnimationDuration=c)}),clearTimeout(t),s?t=setTimeout(function(){typeof n=="function"&&n()},f):typeof n=="function"&&n(),r=[]},animate:function(n,o,s,f){if(f){C(n,"transition",""),C(n,"transform","");var u=Lt(this.el),c=u&&u.a,h=u&&u.d,d=(o.left-s.left)/(c||1),p=(o.top-s.top)/(h||1);n.animatingX=!!d,n.animatingY=!!p,C(n,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=ii(n),C(n,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:"")),C(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){C(n,"transition",""),C(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},f)}}}}function ii(r){return r.offsetWidth}function ai(r,t,e,n){return Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}var jt=[],Ze={initializeByDefault:!0},Kt={mount:function(t){for(var e in Ze)Ze.hasOwnProperty(e)&&!(e in t)&&(t[e]=Ze[e]);jt.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),jt.push(t)},pluginEvent:function(t,e,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var s=t+"Global";jt.forEach(function(f){e[f.pluginName]&&(e[f.pluginName][s]&&e[f.pluginName][s](Et({sortable:e},n)),e.options[f.pluginName]&&e[f.pluginName][t]&&e[f.pluginName][t](Et({sortable:e},n)))})},initializePlugins:function(t,e,n,o){jt.forEach(function(u){var c=u.pluginName;if(!(!t.options[c]&&!u.initializeByDefault)){var h=new u(t,e,t.options);h.sortable=t,h.options=t.options,t[c]=h,Ct(n,h.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var f=this.modifyOption(t,s,t.options[s]);typeof f<"u"&&(t.options[s]=f)}},getEventProperties:function(t,e){var n={};return jt.forEach(function(o){typeof o.eventProperties=="function"&&Ct(n,o.eventProperties.call(e[o.pluginName],t))}),n},modifyOption:function(t,e,n){var o;return jt.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[e]=="function"&&(o=s.optionListeners[e].call(t[s.pluginName],n))}),o}};function oi(r){var t=r.sortable,e=r.rootEl,n=r.name,o=r.targetEl,s=r.cloneEl,f=r.toEl,u=r.fromEl,c=r.oldIndex,h=r.newIndex,d=r.oldDraggableIndex,p=r.newDraggableIndex,b=r.originalEvent,E=r.putSortable,D=r.extraEventProperties;if(t=t||e&&e[mt],!!t){var y,N=t.options,W="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Tt&&!kt?y=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(n,!0,!0)),y.to=f||e,y.from=u||e,y.item=o||e,y.clone=s,y.oldIndex=c,y.newIndex=h,y.oldDraggableIndex=d,y.newDraggableIndex=p,y.originalEvent=b,y.pullMode=E?E.lastPutMode:void 0;var $=Et(Et({},D),Kt.getEventProperties(n,t));for(var V in $)y[V]=$[V];e&&e.dispatchEvent(y),N[W]&&N[W].call(t,y)}}var li=["evt"],dt=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,s=Jr(n,li);Kt.pluginEvent.bind(S)(t,e,Et({dragEl:v,parentEl:Q,ghostEl:T,rootEl:Y,nextEl:qt,lastDownEl:se,cloneEl:k,cloneHidden:Rt,dragStarted:Jt,putSortable:ot,activeSortable:S.active,originalEvent:o,oldIndex:Xt,oldDraggableIndex:Qt,newIndex:gt,newDraggableIndex:Pt,hideGhostForTarget:_r,unhideGhostForTarget:Cr,cloneNowHidden:function(){Rt=!0},cloneNowShown:function(){Rt=!1},dispatchSortableEvent:function(u){ft({sortable:e,name:u,originalEvent:o})}},s))};function ft(r){oi(Et({putSortable:ot,cloneEl:k,targetEl:v,rootEl:Y,oldIndex:Xt,oldDraggableIndex:Qt,newIndex:gt,newDraggableIndex:Pt},r))}var v,Q,T,Y,qt,se,k,Rt,Xt,gt,Qt,Pt,ue,ot,Yt=!1,fe=!1,ce=[],Mt,yt,tn,en,vr,br,Jt,$t,Zt,te=!1,he=!1,me,st,nn=[],rn=!1,de=[],pe=typeof document<"u",ge=Ke,yr=kt||Tt?"cssFloat":"float",si=pe&&!or&&!Ke&&"draggable"in document.createElement("div"),wr=(function(){if(pe){if(Tt)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}})(),Er=function(t,e){var n=C(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Ht(t,0,e),f=Ht(t,1,e),u=s&&C(s),c=f&&C(f),h=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+nt(s).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+nt(f).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var p=u.float==="left"?"left":"right";return f&&(c.clear==="both"||c.clear===p)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||h>=o&&n[yr]==="none"||f&&n[yr]==="none"&&h+d>o)?"vertical":"horizontal"},ui=function(t,e,n){var o=n?t.left:t.top,s=n?t.right:t.bottom,f=n?t.width:t.height,u=n?e.left:e.top,c=n?e.right:e.bottom,h=n?e.width:e.height;return o===u||s===c||o+f/2===u+h/2},fi=function(t,e){var n;return ce.some(function(o){var s=o[mt].options.emptyInsertThreshold;if(!(!s||Qe(o))){var f=nt(o),u=t>=f.left-s&&t<=f.right+s,c=e>=f.top-s&&e<=f.bottom+s;if(u&&c)return n=o}}),n},Dr=function(t){function e(s,f){return function(u,c,h,d){var p=u.options.group.name&&c.options.group.name&&u.options.group.name===c.options.group.name;if(s==null&&(f||p))return!0;if(s==null||s===!1)return!1;if(f&&s==="clone")return s;if(typeof s=="function")return e(s(u,c,h,d),f)(u,c,h,d);var b=(f?u:c).options.group.name;return s===!0||typeof s=="string"&&s===b||s.join&&s.indexOf(b)>-1}}var n={},o=t.group;(!o||oe(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},_r=function(){!wr&&T&&C(T,"display","none")},Cr=function(){!wr&&T&&C(T,"display","")};pe&&!or&&document.addEventListener("click",function(r){if(fe)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),fe=!1,!1},!0);var Bt=function(t){if(v){t=t.touches?t.touches[0]:t;var e=fi(t.clientX,t.clientY);if(e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[mt]._onDragOver(n)}}},ci=function(t){v&&v.parentNode[mt]._isOutsideThisEl(t.target)};function S(r,t){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=t=Ct({},t),r[mt]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Er(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,u){f.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:S.supportPointer!==!1&&"PointerEvent"in window&&(!Wt||Ke),emptyInsertThreshold:5};Kt.initializePlugins(this,r,e);for(var n in e)!(n in t)&&(t[n]=e[n]);Dr(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:si,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?P(r,"pointerdown",this._onTapStart):(P(r,"mousedown",this._onTapStart),P(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(P(r,"dragover",this),P(r,"dragenter",this)),ce.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ct(this,ri())}S.prototype={constructor:S,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&($t=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,v):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,o=this.options,s=o.preventOnFilter,f=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,c=(u||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,d=o.filter;if(yi(n),!v&&!(/mousedown|pointerdown/.test(f)&&t.button!==0||o.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&Wt&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=bt(c,o.draggable,n,!1),!(c&&c.animated)&&se!==c)){if(Xt=vt(c),Qt=vt(c,o.draggable),typeof d=="function"){if(d.call(this,t,c,this)){ft({sortable:e,rootEl:h,name:"filter",targetEl:c,toEl:n,fromEl:n}),dt("filter",e,{evt:t}),s&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=bt(h,p.trim(),n,!1),p)return ft({sortable:e,rootEl:p,name:"filter",targetEl:c,fromEl:n,toEl:n}),dt("filter",e,{evt:t}),!0}),d)){s&&t.preventDefault();return}o.handle&&!bt(h,o.handle,n,!1)||this._prepareDragStart(t,u,c)}}},_prepareDragStart:function(t,e,n){var o=this,s=o.el,f=o.options,u=s.ownerDocument,c;if(n&&!v&&n.parentNode===s){var h=nt(n);if(Y=s,v=n,Q=v.parentNode,qt=v.nextSibling,se=n,ue=f.group,S.dragged=v,Mt={target:v,clientX:(e||t).clientX,clientY:(e||t).clientY},vr=Mt.clientX-h.left,br=Mt.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,v.style["will-change"]="all",c=function(){if(dt("delayEnded",o,{evt:t}),S.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!ar&&o.nativeDraggable&&(v.draggable=!0),o._triggerDragStart(t,e),ft({sortable:o,name:"choose",originalEvent:t}),pt(v,f.chosenClass,!0)},f.ignore.split(",").forEach(function(d){fr(v,d.trim(),an)}),P(u,"dragover",Bt),P(u,"mousemove",Bt),P(u,"touchmove",Bt),f.supportPointer?(P(u,"pointerup",o._onDrop),!this.nativeDraggable&&P(u,"pointercancel",o._onDrop)):(P(u,"mouseup",o._onDrop),P(u,"touchend",o._onDrop),P(u,"touchcancel",o._onDrop)),ar&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0),dt("delayStart",this,{evt:t}),f.delay&&(!f.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(kt||Tt))){if(S.eventCanceled){this._onDrop();return}f.supportPointer?(P(u,"pointerup",o._disableDelayedDrag),P(u,"pointercancel",o._disableDelayedDrag)):(P(u,"mouseup",o._disableDelayedDrag),P(u,"touchend",o._disableDelayedDrag),P(u,"touchcancel",o._disableDelayedDrag)),P(u,"mousemove",o._delayedDragTouchMoveHandler),P(u,"touchmove",o._delayedDragTouchMoveHandler),f.supportPointer&&P(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(c,f.delay)}else c()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&an(v),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;R(t,"mouseup",this._disableDelayedDrag),R(t,"touchend",this._disableDelayedDrag),R(t,"touchcancel",this._disableDelayedDrag),R(t,"pointerup",this._disableDelayedDrag),R(t,"pointercancel",this._disableDelayedDrag),R(t,"mousemove",this._delayedDragTouchMoveHandler),R(t,"touchmove",this._delayedDragTouchMoveHandler),R(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?P(document,"pointermove",this._onTouchMove):e?P(document,"touchmove",this._onTouchMove):P(document,"mousemove",this._onTouchMove):(P(v,"dragend",this),P(Y,"dragstart",this._onDragStart));try{document.selection?be(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Yt=!1,Y&&v){dt("dragStarted",this,{evt:e}),this.nativeDraggable&&P(document,"dragover",ci);var n=this.options;!t&&pt(v,n.dragClass,!1),pt(v,n.ghostClass,!0),S.active=this,t&&this._appendGhost(),ft({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(yt){this._lastX=yt.clientX,this._lastY=yt.clientY,_r();for(var t=document.elementFromPoint(yt.clientX,yt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(yt.clientX,yt.clientY),t!==e);)e=t;if(v.parentNode[mt]._isOutsideThisEl(t),e)do{if(e[mt]){var n=void 0;if(n=e[mt]._onDragOver({clientX:yt.clientX,clientY:yt.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=sr(e));Cr()}},_onTouchMove:function(t){if(Mt){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,s=t.touches?t.touches[0]:t,f=T&&Lt(T,!0),u=T&&f&&f.a,c=T&&f&&f.d,h=ge&&st&&hr(st),d=(s.clientX-Mt.clientX+o.x)/(u||1)+(h?h[0]-nn[0]:0)/(u||1),p=(s.clientY-Mt.clientY+o.y)/(c||1)+(h?h[1]-nn[1]:0)/(c||1);if(!S.active&&!Yt){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(T){f?(f.e+=d-(tn||0),f.f+=p-(en||0)):f={a:1,b:0,c:0,d:1,e:d,f:p};var b="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")");C(T,"webkitTransform",b),C(T,"mozTransform",b),C(T,"msTransform",b),C(T,"transform",b),tn=d,en=p,yt=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!T){var t=this.options.fallbackOnBody?document.body:Y,e=nt(v,!0,ge,!0,t),n=this.options;if(ge){for(st=t;C(st,"position")==="static"&&C(st,"transform")==="none"&&st!==document;)st=st.parentNode;st!==document.body&&st!==document.documentElement?(st===document&&(st=Dt()),e.top+=st.scrollTop,e.left+=st.scrollLeft):st=Dt(),nn=hr(st)}T=v.cloneNode(!0),pt(T,n.ghostClass,!1),pt(T,n.fallbackClass,!0),pt(T,n.dragClass,!0),C(T,"transition",""),C(T,"transform",""),C(T,"box-sizing","border-box"),C(T,"margin",0),C(T,"top",e.top),C(T,"left",e.left),C(T,"width",e.width),C(T,"height",e.height),C(T,"opacity","0.8"),C(T,"position",ge?"absolute":"fixed"),C(T,"zIndex","100000"),C(T,"pointerEvents","none"),S.ghost=T,t.appendChild(T),C(T,"transform-origin",vr/parseInt(T.style.width)*100+"% "+br/parseInt(T.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,s=n.options;if(dt("dragStart",this,{evt:t}),S.eventCanceled){this._onDrop();return}dt("setupClone",this),S.eventCanceled||(k=pr(v),k.removeAttribute("id"),k.draggable=!1,k.style["will-change"]="",this._hideClone(),pt(k,this.options.chosenClass,!1),S.clone=k),n.cloneId=be(function(){dt("clone",n),!S.eventCanceled&&(n.options.removeCloneOnHide||Y.insertBefore(k,v),n._hideClone(),ft({sortable:n,name:"clone"}))}),!e&&pt(v,s.dragClass,!0),e?(fe=!0,n._loopId=setInterval(n._emulateDragOver,50)):(R(document,"mouseup",n._onDrop),R(document,"touchend",n._onDrop),R(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(n,o,v)),P(document,"drop",n),C(v,"transform","translateZ(0)")),Yt=!0,n._dragStartId=be(n._dragStarted.bind(n,e,t)),P(document,"selectstart",n),Jt=!0,window.getSelection().removeAllRanges(),Wt&&C(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,o,s,f,u=this.options,c=u.group,h=S.active,d=ue===c,p=u.sort,b=ot||h,E,D=this,y=!1;if(rn)return;function N(_t,Ot){dt(_t,D,Et({evt:t,isOwner:d,axis:E?"vertical":"horizontal",revert:f,dragRect:o,targetRect:s,canSort:p,fromSortable:b,target:n,completed:$,onMove:function(wt,Ut){return ve(Y,e,v,o,wt,nt(wt),t,Ut)},changed:V},Ot))}function W(){N("dragOverAnimationCapture"),D.captureAnimationState(),D!==b&&b.captureAnimationState()}function $(_t){return N("dragOverCompleted",{insertion:_t}),_t&&(d?h._hideClone():h._showClone(D),D!==b&&(pt(v,ot?ot.options.ghostClass:h.options.ghostClass,!1),pt(v,u.ghostClass,!0)),ot!==D&&D!==S.active?ot=D:D===S.active&&ot&&(ot=null),b===D&&(D._ignoreWhileAnimating=n),D.animateAll(function(){N("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(n===v&&!v.animated||n===e&&!n.animated)&&($t=null),!u.dragoverBubble&&!t.rootEl&&n!==document&&(v.parentNode[mt]._isOutsideThisEl(t.target),!_t&&Bt(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),y=!0}function V(){gt=vt(v),Pt=vt(v,u.draggable),ft({sortable:D,name:"change",toEl:e,newIndex:gt,newDraggableIndex:Pt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=bt(n,u.draggable,e,!0),N("dragOver"),S.eventCanceled)return y;if(v.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||D._ignoreWhileAnimating===n)return $(!1);if(fe=!1,h&&!u.disabled&&(d?p||(f=Q!==Y):ot===this||(this.lastPutMode=ue.checkPull(this,h,v,t))&&c.checkPut(this,h,v,t))){if(E=this._getDirection(t,n)==="vertical",o=nt(v),N("dragOverValid"),S.eventCanceled)return y;if(f)return Q=Y,W(),this._hideClone(),N("revert"),S.eventCanceled||(qt?Y.insertBefore(v,qt):Y.appendChild(v)),$(!0);var it=Qe(e,u.draggable);if(!it||pi(t,E,this)&&!it.animated){if(it===v)return $(!1);if(it&&e===t.target&&(n=it),n&&(s=nt(n)),ve(Y,e,v,o,n,s,t,!!n)!==!1)return W(),it&&it.nextSibling?e.insertBefore(v,it.nextSibling):e.appendChild(v),Q=e,V(),$(!0)}else if(it&&di(t,E,this)){var tt=Ht(e,0,u,!0);if(tt===v)return $(!1);if(n=tt,s=nt(n),ve(Y,e,v,o,n,s,t,!1)!==!1)return W(),e.insertBefore(v,tt),Q=e,V(),$(!0)}else if(n.parentNode===e){s=nt(n);var A=0,lt,X=v.parentNode!==e,K=!ui(v.animated&&v.toRect||o,n.animated&&n.toRect||s,E),M=E?"top":"left",O=cr(n,"top","top")||cr(v,"top","top"),z=O?O.scrollTop:void 0;$t!==n&&(lt=s[M],te=!1,he=!K&&u.invertSwap||X),A=gi(t,n,s,E,K?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,he,$t===n);var I;if(A!==0){var U=vt(v);do U-=A,I=Q.children[U];while(I&&(C(I,"display")==="none"||I===T))}if(A===0||I===n)return $(!1);$t=n,Zt=A;var j=n.nextElementSibling,x=!1;x=A===1;var J=ve(Y,e,v,o,n,s,t,x);if(J!==!1)return(J===1||J===-1)&&(x=J===1),rn=!0,setTimeout(mi,30),W(),x&&!j?e.appendChild(v):n.parentNode.insertBefore(v,x?j:n),O&&dr(O,0,z-O.scrollTop),Q=v.parentNode,lt!==void 0&&!he&&(me=Math.abs(lt-nt(n)[M])),V(),$(!0)}if(e.contains(v))return $(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){R(document,"mousemove",this._onTouchMove),R(document,"touchmove",this._onTouchMove),R(document,"pointermove",this._onTouchMove),R(document,"dragover",Bt),R(document,"mousemove",Bt),R(document,"touchmove",Bt)},_offUpEvents:function(){var t=this.el.ownerDocument;R(t,"mouseup",this._onDrop),R(t,"touchend",this._onDrop),R(t,"pointerup",this._onDrop),R(t,"pointercancel",this._onDrop),R(t,"touchcancel",this._onDrop),R(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(gt=vt(v),Pt=vt(v,n.draggable),dt("drop",this,{evt:t}),Q=v&&v.parentNode,gt=vt(v),Pt=vt(v,n.draggable),S.eventCanceled){this._nulling();return}Yt=!1,he=!1,te=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),on(this.cloneId),on(this._dragStartId),this.nativeDraggable&&(R(document,"drop",this),R(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wt&&C(document.body,"user-select",""),C(v,"transform",""),t&&(Jt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),T&&T.parentNode&&T.parentNode.removeChild(T),(Y===Q||ot&&ot.lastPutMode!=="clone")&&k&&k.parentNode&&k.parentNode.removeChild(k),v&&(this.nativeDraggable&&R(v,"dragend",this),an(v),v.style["will-change"]="",Jt&&!Yt&&pt(v,ot?ot.options.ghostClass:this.options.ghostClass,!1),pt(v,this.options.chosenClass,!1),ft({sortable:this,name:"unchoose",toEl:Q,newIndex:null,newDraggableIndex:null,originalEvent:t}),Y!==Q?(gt>=0&&(ft({rootEl:Q,name:"add",toEl:Q,fromEl:Y,originalEvent:t}),ft({sortable:this,name:"remove",toEl:Q,originalEvent:t}),ft({rootEl:Q,name:"sort",toEl:Q,fromEl:Y,originalEvent:t}),ft({sortable:this,name:"sort",toEl:Q,originalEvent:t})),ot&&ot.save()):gt!==Xt&&gt>=0&&(ft({sortable:this,name:"update",toEl:Q,originalEvent:t}),ft({sortable:this,name:"sort",toEl:Q,originalEvent:t})),S.active&&((gt==null||gt===-1)&&(gt=Xt,Pt=Qt),ft({sortable:this,name:"end",toEl:Q,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){dt("nulling",this),Y=v=Q=T=qt=k=se=Rt=Mt=yt=Jt=gt=Pt=Xt=Qt=$t=Zt=ot=ue=S.dragged=S.ghost=S.clone=S.active=null,de.forEach(function(t){t.checked=!0}),de.length=tn=en=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":v&&(this._onDragOver(t),hi(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,o=0,s=n.length,f=this.options;o<s;o++)e=n[o],bt(e,f.draggable,this.el,!1)&&t.push(e.getAttribute(f.dataIdAttr)||bi(e));return t},sort:function(t,e){var n={},o=this.el;this.toArray().forEach(function(s,f){var u=o.children[f];bt(u,this.options.draggable,o,!1)&&(n[s]=u)},this),e&&this.captureAnimationState(),t.forEach(function(s){n[s]&&(o.removeChild(n[s]),o.appendChild(n[s]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return bt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var o=Kt.modifyOption(this,t,e);typeof o<"u"?n[t]=o:n[t]=e,t==="group"&&Dr(n)},destroy:function(){dt("destroy",this);var t=this.el;t[mt]=null,R(t,"mousedown",this._onTapStart),R(t,"touchstart",this._onTapStart),R(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(R(t,"dragover",this),R(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ce.splice(ce.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Rt){if(dt("hideClone",this),S.eventCanceled)return;C(k,"display","none"),this.options.removeCloneOnHide&&k.parentNode&&k.parentNode.removeChild(k),Rt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Rt){if(dt("showClone",this),S.eventCanceled)return;v.parentNode==Y&&!this.options.group.revertClone?Y.insertBefore(k,v):qt?Y.insertBefore(k,qt):Y.appendChild(k),this.options.group.revertClone&&this.animate(v,k),C(k,"display",""),Rt=!1}}};function hi(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function ve(r,t,e,n,o,s,f,u){var c,h=r[mt],d=h.options.onMove,p;return window.CustomEvent&&!Tt&&!kt?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=t,c.from=r,c.dragged=e,c.draggedRect=n,c.related=o||t,c.relatedRect=s||nt(t),c.willInsertAfter=u,c.originalEvent=f,r.dispatchEvent(c),d&&(p=d.call(h,c,f)),p}function an(r){r.draggable=!1}function mi(){rn=!1}function di(r,t,e){var n=nt(Ht(e.el,0,e.options,!0)),o=gr(e.el,e.options,T),s=10;return t?r.clientX<o.left-s||r.clientY<n.top&&r.clientX<n.right:r.clientY<o.top-s||r.clientY<n.bottom&&r.clientX<n.left}function pi(r,t,e){var n=nt(Qe(e.el,e.options.draggable)),o=gr(e.el,e.options,T),s=10;return t?r.clientX>o.right+s||r.clientY>n.bottom&&r.clientX>n.left:r.clientY>o.bottom+s||r.clientX>n.right&&r.clientY>n.top}function gi(r,t,e,n,o,s,f,u){var c=n?r.clientY:r.clientX,h=n?e.height:e.width,d=n?e.top:e.left,p=n?e.bottom:e.right,b=!1;if(!f){if(u&&me<h*o){if(!te&&(Zt===1?c>d+h*s/2:c<p-h*s/2)&&(te=!0),te)b=!0;else if(Zt===1?c<d+me:c>p-me)return-Zt}else if(c>d+h*(1-o)/2&&c<p-h*(1-o)/2)return vi(t)}return b=b||f,b&&(c<d+h*s/2||c>p-h*s/2)?c>d+h/2?1:-1:0}function vi(r){return vt(v)<vt(r)?1:-1}function bi(r){for(var t=r.tagName+r.className+r.src+r.href+r.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function yi(r){de.length=0;for(var t=r.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&de.push(n)}}function be(r){return setTimeout(r,0)}function on(r){return clearTimeout(r)}pe&&P(document,"touchmove",function(r){(S.active||Yt)&&r.cancelable&&r.preventDefault()}),S.utils={on:P,off:R,css:C,find:fr,is:function(t,e){return!!bt(t,e,t,!1)},extend:ei,throttle:mr,closest:bt,toggleClass:pt,clone:pr,index:vt,nextTick:be,cancelNextTick:on,detectDirection:Er,getChild:Ht,expando:mt},S.get=function(r){return r[mt]},S.mount=function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(S.utils=Et(Et({},S.utils),n.utils)),Kt.mount(n)})},S.create=function(r,t){return new S(r,t)},S.version=Zr;var rt=[],ee,ln,sn=!1,un,fn,ye,ne;function wi(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return r.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):this.options.supportPointer?P(document,"pointermove",this._handleFallbackAutoScroll):n.touches?P(document,"touchmove",this._handleFallbackAutoScroll):P(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?R(document,"dragover",this._handleAutoScroll):(R(document,"pointermove",this._handleFallbackAutoScroll),R(document,"touchmove",this._handleFallbackAutoScroll),R(document,"mousemove",this._handleFallbackAutoScroll)),Sr(),we(),ni()},nulling:function(){ye=ln=ee=sn=ne=un=fn=null,rt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var o=this,s=(e.touches?e.touches[0]:e).clientX,f=(e.touches?e.touches[0]:e).clientY,u=document.elementFromPoint(s,f);if(ye=e,n||this.options.forceAutoScrollFallback||kt||Tt||Wt){cn(e,this.options,u,n);var c=xt(u,!0);sn&&(!ne||s!==un||f!==fn)&&(ne&&Sr(),ne=setInterval(function(){var h=xt(document.elementFromPoint(s,f),!0);h!==c&&(c=h,we()),cn(e,o.options,h,n)},10),un=s,fn=f)}else{if(!this.options.bubbleScroll||xt(u,!0)===Dt()){we();return}cn(e,this.options,xt(u,!1),!1)}}},Ct(r,{pluginName:"scroll",initializeByDefault:!0})}function we(){rt.forEach(function(r){clearInterval(r.pid)}),rt=[]}function Sr(){clearInterval(ne)}var cn=mr(function(r,t,e,n){if(t.scroll){var o=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,f=t.scrollSensitivity,u=t.scrollSpeed,c=Dt(),h=!1,d;ln!==e&&(ln=e,we(),ee=t.scroll,d=t.scrollFn,ee===!0&&(ee=xt(e,!0)));var p=0,b=ee;do{var E=b,D=nt(E),y=D.top,N=D.bottom,W=D.left,$=D.right,V=D.width,it=D.height,tt=void 0,A=void 0,lt=E.scrollWidth,X=E.scrollHeight,K=C(E),M=E.scrollLeft,O=E.scrollTop;E===c?(tt=V<lt&&(K.overflowX==="auto"||K.overflowX==="scroll"||K.overflowX==="visible"),A=it<X&&(K.overflowY==="auto"||K.overflowY==="scroll"||K.overflowY==="visible")):(tt=V<lt&&(K.overflowX==="auto"||K.overflowX==="scroll"),A=it<X&&(K.overflowY==="auto"||K.overflowY==="scroll"));var z=tt&&(Math.abs($-o)<=f&&M+V<lt)-(Math.abs(W-o)<=f&&!!M),I=A&&(Math.abs(N-s)<=f&&O+it<X)-(Math.abs(y-s)<=f&&!!O);if(!rt[p])for(var U=0;U<=p;U++)rt[U]||(rt[U]={});(rt[p].vx!=z||rt[p].vy!=I||rt[p].el!==E)&&(rt[p].el=E,rt[p].vx=z,rt[p].vy=I,clearInterval(rt[p].pid),(z!=0||I!=0)&&(h=!0,rt[p].pid=setInterval((function(){n&&this.layer===0&&S.active._onTouchMove(ye);var j=rt[this.layer].vy?rt[this.layer].vy*u:0,x=rt[this.layer].vx?rt[this.layer].vx*u:0;typeof d=="function"&&d.call(S.dragged.parentNode[mt],x,j,r,ye,rt[this.layer].el)!=="continue"||dr(rt[this.layer].el,x,j)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&b!==c&&(b=xt(b,!1)));sn=h}},30),Tr=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,s=t.activeSortable,f=t.dispatchSortableEvent,u=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(e){var h=n||s;u();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(d.clientX,d.clientY);c(),h&&!h.el.contains(p)&&(f("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function hn(){}hn.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Ht(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Tr},Ct(hn,{pluginName:"revertOnSpill"});function mn(){}mn.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,o=n||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:Tr},Ct(mn,{pluginName:"removeOnSpill"}),S.mount(new wi),S.mount(mn,hn);class Ei extends zr{oninit(t){super.oninit(t),this.loading=!1,this.buttonsCustomizationList=[],this.loadResults()}initSort(){const t=document.getElementById("buttonsCustomizationSortableItems");t&&S.create(t,{animation:150,swapThreshold:.65,onEnd:e=>this.updateSort(e)})}content(t){return F("div",{className:"ExtensionPage-settings FlarumBadgesPage"},[F("div",{className:"container"},[F("div",{style:"padding-bottom:10px"},[F(zt,{className:"Button",onclick:()=>H.modal.show(ae)},H.translator.trans("client1-buttons-customization.admin.link-add"))]),F("ul",{id:"buttonsCustomizationSortableItems",style:"padding:0px;list-style-type: none;",oncreate:this.initSort.bind(this)},this.buttonsCustomizationList.map(n=>F("li",{"data-item-id":n.id(),style:"margin-top:5px;background: var(--body-bg);"},Vr.component({ButtonsCustomizationItemData:n}))))])])}updateSort(t){const e=t.newIndex,n=t.oldIndex;if(e!==n){const o=t.from?.children,s={};if(o){for(let f=0;f<o.length;f++){const c=o[f].getAttribute("data-item-id");c&&(s[c]=f)}H.request({url:`${H.forum.attribute("apiUrl")}/buttonsCustomizationList/order`,method:"POST",body:{buttonsCustomizationOrder:s}})}}}parseResults(t){return this.buttonsCustomizationList.push(...t),F.redraw(),t}loadResults(){return H.store.find("buttonsCustomizationList").catch(()=>[]).then(this.parseResults.bind(this))}}class Or extends Ft{}Object.assign(Or.prototype,{id:Ft.attribute("id"),name:Ft.attribute("name"),icon:Ft.attribute("icon"),color:Ft.attribute("color"),url:Ft.attribute("url"),sort:Ft.attribute("sort")}),H.initializers.add("wusong8899-buttons-customization",()=>{H.store.models.buttonsCustomizationList=Or,H.extensionData.for("wusong8899-client1-buttons-customization").registerPage(Ei)})})(flarum.core.compat["admin/app"],flarum.core.compat["admin/components/ExtensionPage"],flarum.core.compat["common/components/Button"],flarum.core.compat["common/components/Modal"],flarum.core.compat["common/utils/Stream"],flarum.core.compat["common/Component"],flarum.core.compat["common/Model"]);
//# sourceMappingURL=admin.js.map
